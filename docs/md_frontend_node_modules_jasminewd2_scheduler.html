<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: Schedulers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_jasminewd2_scheduler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Schedulers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Many of the core features of jasminewd are centered around automatically synchronizing your tests with the WebDriver control flow. However, jasminewd can synchronize with any scheduler as long as it implements the following interface:</p>
<div class="fragment"><div class="line">interface Scheduler {</div>
<div class="line">  execute&lt;T&gt;(fn: () =&gt; Promise&lt;T&gt;|T): Promise&lt;T&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Where <code>execute</code> is the function used to put something on the scheduler. As long as your scheduler implements this interface, you can pass it into &lsquo;require('jasminewd2&rsquo;).init`.</p>
<h1><a class="anchor" id="autotoc_md13207"></a>
Custom Promise Implementation</h1>
<p>Some schedulers need scheduled functions to use a specific implementation of the promise API. For instance, WebDriver has its <code>ManagedPromise</code> implementation, which it needs in order to track tasks across <code>then()</code> blocks. If your scheduler has its own promise implementation, you can implement the following interface:</p>
<div class="fragment"><div class="line">interface SchedulerWithCustomPromises {</div>
<div class="line">  execute&lt;T&gt;(fn: () =&gt; CustomPromise&lt;T&gt;|T): CustomPromise&lt;T&gt;;</div>
<div class="line">  promise&lt;T&gt;(resolver: (resolve: (T) =&gt; void, reject: (any) =&gt; void) =&gt; void): CustomPromise&lt;T&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>If the <code>promise</code> function is specified, jasminewd will use that function to generate all of its internal promises. If <code>scheduler.promise</code> is not specified, jasminewd will try to use WebDriver's <code>ManagedPromise</code>. If <code>ManagedPromise</code> is not available (e.g. the control flow is disabled), jasminewd will default to using native promises.</p>
<h2><a class="anchor" id="autotoc_md13208"></a>
Idle API</h2>
<p>If your scheduler requires a custom promise implementation, it is highly recommended that you implement the Idle API. This will help to mitigate issues with users who sometimes use other promise implementations (see <a href="https://github.com/angular/jasminewd/issues/68#issuecomment-262317167">https://github.com/angular/jasminewd/issues/68#issuecomment-262317167</a>). To do this, implement the following interface:</p>
<div class="fragment"><div class="line">var EventEmitter = require(&#39;events&#39;);</div>
<div class="line"> </div>
<div class="line">interface SchedulerWithIdleAPI extends EventEmitter {</div>
<div class="line">  execute&lt;T&gt;(fn: () =&gt; CustomPromise&lt;T&gt;|T): CustomPromise&lt;T&gt;;</div>
<div class="line">  promise&lt;T&gt;(resolver: (resolve: (T) =&gt; void, reject: (any) =&gt; void) =&gt; void): CustomPromise&lt;T&gt;;</div>
<div class="line">  isIdle(): boolean;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Your scheduler must emit <code>"idle"</code> when it becomes idle.</p>
<h2><a class="anchor" id="autotoc_md13209"></a>
Reset API</h2>
<p>If you want your scheduler to be reset whenever a spec times out, implement the following interface:</p>
<div class="fragment"><div class="line">interface SchedulerWithResetAPI {</div>
<div class="line">  execute&lt;T&gt;(fn: () =&gt; CustomPromise&lt;T&gt;|T): CustomPromise&lt;T&gt;;</div>
<div class="line">  reset(): void;</div>
<div class="line">}</div>
</div><!-- fragment --><p>jasminewd will automatically look for a <code>reset</code> function and call it when specs time out. This is useful so that tasks from a timed out spec get cleared instead of continuing to tie up the scheduler and potentially getting executed during future specs. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
