<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: webpack-subresource-integrity</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_webpack-subresource-integrity__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">webpack-subresource-integrity </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://badge.fury.io/js/webpack-subresource-integrity"><img src="https://badge.fury.io/js/webpack-subresource-integrity.svg" alt="npm version" style="pointer-events: none;" class="inline"/></a> <a href="https://travis-ci.org/waysact/webpack-subresource-integrity"><img src="https://travis-ci.org/waysact/webpack-subresource-integrity.svg?branch=master" alt="Travis Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://ci.appveyor.com/project/jscheid/webpack-subresource-integrity"><img src="https://ci.appveyor.com/api/projects/status/63bydfph00sghg18/branch/master?svg=true" alt="Appveyor Build Status" class="inline"/></a> <a href="https://coveralls.io/github/waysact/webpack-subresource-integrity?branch=master"><img src="https://coveralls.io/repos/github/waysact/webpack-subresource-integrity/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://codeclimate.com/github/waysact/webpack-subresource-integrity"><img src="https://codeclimate.com/github/waysact/webpack-subresource-integrity/badges/gpa.svg" alt="Code Climate" style="pointer-events: none;" class="inline"/></a> <a href="https://raw.githubusercontent.com/waysact/webpack-subresource-integrity/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="GitHub license" style="pointer-events: none;" class="inline"/></a></p>
<p>Webpack plugin for enabling Subresource Integrity.</p>
<p><a href="http://www.w3.org/TR/SRI/">Subresource Integrity</a> (SRI) is a security feature that enables browsers to verify that files they fetch (for example, from a CDN) are delivered without unexpected manipulation.</p>
<h1><a class="anchor" id="autotoc_md33168"></a>
Features</h1>
<ul>
<li>Optional integration with <a href="https://github.com/ampedandwired/html-webpack-plugin">html-webpack-plugin</a></li>
<li>Automatic support for code splitting (integrity for lazy-loaded chunks)</li>
<li>Compatible with Webpack 1.x, 2.x, 3.x and 4.x</li>
</ul>
<h1><a class="anchor" id="autotoc_md33169"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install webpack-subresource-integrity --save-dev</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33170"></a>
Webpack Configuration Example</h2>
<div class="fragment"><div class="line">import SriPlugin from &#39;webpack-subresource-integrity&#39;;</div>
<div class="line"> </div>
<div class="line">const compiler = webpack({</div>
<div class="line">    output: {</div>
<div class="line">        crossOriginLoading: &#39;anonymous&#39;,</div>
<div class="line">    },</div>
<div class="line">    plugins: [</div>
<div class="line">        new SriPlugin({</div>
<div class="line">            hashFuncNames: [&#39;sha256&#39;, &#39;sha384&#39;],</div>
<div class="line">            enabled: process.env.NODE_ENV === &#39;production&#39;,</div>
<div class="line">        }),</div>
<div class="line">    ],</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33171"></a>
Setting the &lt;tt&gt;integrity&lt;/tt&gt; attribute for top-level assets</h2>
<p>For the plugin to take effect it is <b>essential</b> that you set the <code>integrity</code> attribute for top-level assets (i.e. assets loaded by your HTML pages.)</p>
<h3><a class="anchor" id="autotoc_md33172"></a>
With HtmlWebpackPlugin</h3>
<p>When html-webpack-plugin is injecting assets into the template (the default), the <code>integrity</code> attribute will be set automatically. The <code>crossorigin</code> attribute will be set as well, to the value of <code>output.crossOriginLoading</code> webpack option. There is nothing else to be done.</p>
<h3><a class="anchor" id="autotoc_md33173"></a>
With HtmlWebpackPlugin({ inject: false })</h3>
<p>When you use html-webpack-plugin with <code>inject: false</code>, you are required to set the <code>integrity</code> and <code>crossorigin</code> attributes in your template as follows:</p>
<div class="fragment"><div class="line">&lt;% for (var index in htmlWebpackPlugin.files.js) { %&gt;</div>
<div class="line">  &lt;script</div>
<div class="line">     src=&quot;&lt;%= htmlWebpackPlugin.files.js[index] %&gt;&quot;</div>
<div class="line">     integrity=&quot;&lt;%= htmlWebpackPlugin.files.jsIntegrity[index] %&gt;&quot;</div>
<div class="line">     crossorigin=&quot;&lt;%= webpackConfig.output.crossOriginLoading %&gt;&quot;</div>
<div class="line">  &gt;&lt;/script&gt;</div>
<div class="line">&lt;% } %&gt;</div>
<div class="line"> </div>
<div class="line">&lt;% for (var index in htmlWebpackPlugin.files.css) { %&gt;</div>
<div class="line">  &lt;link</div>
<div class="line">     rel=&quot;stylesheet&quot;</div>
<div class="line">     href=&quot;&lt;%= htmlWebpackPlugin.files.css[index] %&gt;&quot;</div>
<div class="line">     integrity=&quot;&lt;%= htmlWebpackPlugin.files.cssIntegrity[index] %&gt;&quot;</div>
<div class="line">     crossorigin=&quot;&lt;%= webpackConfig.output.crossOriginLoading %&gt;&quot;</div>
<div class="line">  /&gt;</div>
<div class="line">&lt;% } %&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md33174"></a>
Without HtmlWebpackPlugin</h3>
<p>The correct value for the <code>integrity</code> attribute can be retrieved from the <code>integrity</code> property of Webpack assets. However, that property is not copied over by Webpack's <code>stats</code> module so you'll have to access the "original" asset on the <code>compilation</code> object. For example:</p>
<div class="fragment"><div class="line">compiler.plugin(&quot;done&quot;, stats =&gt; {</div>
<div class="line">    const mainAssetName = stats.toJson().assetsByChunkName.main;</div>
<div class="line">    const integrity = stats.compilation.assets[mainAssetName].integrity;</div>
<div class="line">});</div>
</div><!-- fragment --><p>Note that you're also required to set the <code>crossorigin</code> attribute. It is recommended to set this attribute to the same value as the webpack <code>output.crossOriginLoading</code> configuration option.</p>
<h2><a class="anchor" id="autotoc_md33175"></a>
Web Server Configuration</h2>
<p>If your page can be loaded through plain HTTP (as opposed to HTTPS), you must set the <code>Cache-Control: no-transform</code> response header or your page will break when assets are loaded through a transforming proxy. <a href="#proxies">See below</a> for more information.</p>
<h2><a class="anchor" id="autotoc_md33176"></a>
Content Security Policy</h2>
<p><strike>Consider adding the following rule to your CSP file:</strike></p>
<p>~~<code>Content-Security-Policy: require-sri-for script style;</code>~~</p>
<p><strike>It ensures that if, for some reason, this plugin fails to add integrity attributes to all your assets, your page will fail to load rather than load with unverified assets.</strike></p>
<p><code>require-sri-for</code> has never officially shipped in <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=618924">Chrome</a> or <a href="https://groups.google.com/d/msg/mozilla.dev.platform/TKFsYlh9pr8/o_Vq_1s7BwAJ">Firefox</a>, and both appear to be leaning towards removing their implementations.</p>
<h2><a class="anchor" id="autotoc_md33177"></a>
Options</h2>
<h3><a class="anchor" id="autotoc_md33178"></a>
hashFuncNames</h3>
<p>Required option, no default value.</p>
<p>An array of strings, each specifying the name of a hash function to be used for calculating integrity hash values. For example, &lsquo;['sha256&rsquo;, 'sha512']`.</p>
<p>See <a href="http://www.w3.org/TR/SRI/#cryptographic-hash-functions">SRI: Cryptographic hash functions</a></p>
<h3><a class="anchor" id="autotoc_md33179"></a>
enabled</h3>
<p>Default value: <code>true</code></p>
<p>When this value is falsy, the plugin doesn't run and no integrity values are calculated. It is recommended to disable the plugin in development mode.</p>
<h1><a class="anchor" id="autotoc_md33180"></a>
Exporting &lt;tt&gt;integrity&lt;/tt&gt; values</h1>
<p>You might want to export generated integrity hashes, perhaps for use with SSR. We recommend <a href="https://github.com/webdeveric/webpack-assets-manifest">webpack-assets-manifest</a> for this purpose. When configured with option <code>integrity: true</code> it will include the hashes generated by this plugin in the manifest (requires webpack-assets-manifest version &gt;= 3 which in turn requires Webpack &gt;= 4).</p>
<p><a href="examples/webpack-assets-manifest/">Example usage with webpack-assets-manifest</a>.</p>
<h1><a class="anchor" id="autotoc_md33181"></a>
Caveats</h1>
<h2><a class="anchor" id="autotoc_md33182"></a>
Preloading</h2>
<p>This plugin adds the integrity attribute to <code>&lt;link rel="preload"&gt;</code> tags, but preloading with SRI doesn't work as expected in current Chrome versions. The resource will be loaded twice, defeating the purpose of preloading. This problem doesn't appear to exist in Firefox or Safari. See <a href="https://github.com/waysact/webpack-subresource-integrity/issues/111">issue #111</a> for more information.</p>
<h2><a class="anchor" id="autotoc_md33183"></a>
Proxies</h2>
<p>By its very nature, SRI can cause your page to break when assets are modified by a proxy. This is because SRI doesn't distinguish between malicious and benevolent modifications: any modification will prevent an asset from being loaded.</p>
<p>Notably, this issue can arise when your page is loaded through <a href="https://developer.chrome.com/multidevice/data-compression">Chrome Data Saver</a>.</p>
<p>This is only a problem when your page can be loaded with plain HTTP, since proxies are incapable of modifying encrypted HTTPS responses.</p>
<p>Presumably, you're looking to use SRI because you're concerned about security and thus your page is only served through HTTPS anyway. However, if you really need to use SRI and HTTP together, you should set the <code>Cache-Control: no-transform</code> response header. This will instruct all well-behaved proxies (including Chrome Data Saver) to refrain from modifying the assets.</p>
<h2><a class="anchor" id="autotoc_md33184"></a>
Browser support</h2>
<p>Browser support for SRI is widely implemented. Your page will still work on browsers without support for SRI, but subresources won't be protected from tampering.</p>
<p>See <a href="http://caniuse.com/#feat=subresource-integrity">Can I use Subresource Integrity?</a></p>
<h2><a class="anchor" id="autotoc_md33185"></a>
Hot Reloading</h2>
<p>This plugin can interfere with hot reloading and therefore should be disabled when using tools such as <code>webpack-dev-server</code>. This shouldn't be a problem because hot reloading is usually used only in development mode where SRI is not normally needed.</p>
<p>For testing SRI without setting up a full-blown web server, consider using a tool such as <a href="https://github.com/indexzero/http-server"><code>http-server</code></a>.</p>
<h2><a class="anchor" id="autotoc_md33186"></a>
Safari and Assets that Require Cookies</h2>
<p>As detailed in <a href="https://github.com/webpack/webpack/issues/6972">Webpack Issue #6972</a>, the <code>crossOrigin</code> attribute can break loading of assets in certain edge cases due to a bug in Safari. Since SRI requires the <code>crossOrigin</code> attribute to be set, you may run into this case even when source URL is same-origin with respect to the asset.</p>
<h1><a class="anchor" id="autotoc_md33187"></a>
Further Reading</h1>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">MDN: Subresource Integrity</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md33188"></a>
License</h1>
<p>Copyright (c) 2015-present Waysact Pty Ltd</p>
<p>MIT (see [LICENSE](LICENSE)) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
