<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: gensync</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_gensync__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">gensync </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This module allows for developers to write common code that can share implementation details, hiding whether an underlying request happens synchronously or asynchronously. This is in contrast with many current Node APIs which explicitly implement the same API twice, once with calls to synchronous functions, and once with asynchronous functions.</p>
<p>Take for example <code>fs.readFile</code> and <code>fs.readFileSync</code>, if you're writing an API that loads a file and then performs a synchronous operation on the data, it can be frustrating to maintain two parallel functions.</p>
<h1><a class="anchor" id="autotoc_md10575"></a>
Example</h1>
<div class="fragment"><div class="line">const fs = require(&quot;fs&quot;);</div>
<div class="line">const gensync = require(&quot;gensync&quot;);</div>
<div class="line"> </div>
<div class="line">const readFile = gensync({</div>
<div class="line">  sync: fs.readFileSync,</div>
<div class="line">  errback: fs.readFile,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const myOperation = gensync(function* (filename) {</div>
<div class="line">  const code = yield* readFile(filename, &quot;utf8&quot;);</div>
<div class="line"> </div>
<div class="line">  return &quot;// some custom prefix\n&quot; + code;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Load and add the prefix synchronously:</div>
<div class="line">const result = myOperation.sync(&quot;./some-file.js&quot;);</div>
<div class="line"> </div>
<div class="line">// Load and add the prefix asynchronously with promises:</div>
<div class="line">myOperation.async(&quot;./some-file.js&quot;).then(result =&gt; {</div>
<div class="line"> </div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Load and add the prefix asynchronously with promises:</div>
<div class="line">myOperation.errback(&quot;./some-file.js&quot;, (err, result) =&gt; {</div>
<div class="line"> </div>
<div class="line">});</div>
</div><!-- fragment --><p>This could even be exposed as your official API by doing </p><div class="fragment"><div class="line">// Using the common &#39;Sync&#39; suffix for sync functions, and &#39;Async&#39; suffix for</div>
<div class="line">// promise-returning versions.</div>
<div class="line">exports.myOperationSync = myOperation.sync;</div>
<div class="line">exports.myOperationAsync = myOperation.async;</div>
<div class="line">exports.myOperation = myOperation.errback;</div>
</div><!-- fragment --><p>or potentially expose one of the async versions as the default, with a <code>.sync</code> property on the function to expose the synchronous version. </p><div class="fragment"><div class="line">module.exports = myOperation.errback;</div>
<div class="line">module.exports.sync = myOperation.sync;</div>
<div class="line">````</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">## API</div>
<div class="line"> </div>
<div class="line">### gensync(generatorFnOrOptions)</div>
<div class="line"> </div>
<div class="line">Returns a function that can be &quot;await&quot;-ed in another `gensync` generator</div>
<div class="line">function, or executed via</div>
<div class="line"> </div>
<div class="line">* `.sync(...args)` - Returns the computed value, or throws.</div>
<div class="line">* `.async(...args)` - Returns a promise for the computed value.</div>
<div class="line">* `.errback(...args, (err, result) =&gt; {})` - Calls the callback with the computed value, or error.</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">#### Passed a generator</div>
<div class="line"> </div>
<div class="line">Wraps the generator to populate the `.sync`/`.async`/`.errback` helpers above to</div>
<div class="line">allow for evaluation of the generator for the final value.</div>
<div class="line"> </div>
<div class="line">##### Example</div>
<div class="line"> </div>
<div class="line">```js</div>
<div class="line">const readFile = function* () {</div>
<div class="line">  return 42;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">const readFileAndMore = gensync(function* (){</div>
<div class="line">  const val = yield* readFile();</div>
<div class="line">  return 42 + val;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// In general cases</div>
<div class="line">const code = readFileAndMore.sync(&quot;./file.js&quot;, &quot;utf8&quot;);</div>
<div class="line">readFileAndMore.async(&quot;./file.js&quot;, &quot;utf8&quot;).then(code =&gt; {})</div>
<div class="line">readFileAndMore.errback(&quot;./file.js&quot;, &quot;utf8&quot;, (err, code) =&gt; {});</div>
<div class="line"> </div>
<div class="line">// In a generator being called indirectly with .sync/.async/.errback</div>
<div class="line">const code = yield* readFileAndMore(&quot;./file.js&quot;, &quot;utf8&quot;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md10576"></a>
Passed an options object</h3>
<ul>
<li><p class="startli"><code>opts.sync</code></p>
<p class="startli">Example: <code>(...args) =&gt; 4</code></p>
<p class="startli">A function that will be called when <code>.sync()</code> is called on the <code>gensync()</code> result, or when the result is passed to <code>yield*</code> in another generator that is being run synchronously.</p>
<p class="startli">Also called for <code>.async()</code> calls if no async handlers are provided.</p>
</li>
<li><p class="startli"><code>opts.async</code></p>
<p class="startli">Example: <code>async (...args) =&gt; 4</code></p>
<p class="startli">A function that will be called when <code>.async()</code> or <code>.errback()</code> is called on the <code>gensync()</code> result, or when the result is passed to <code>yield*</code> in another generator that is being run asynchronously.</p>
</li>
<li><p class="startli"><code>opts.errback</code></p>
<p class="startli">Example: <code>(...args, cb) =&gt; cb(null, 4)</code></p>
<p class="startli">A function that will be called when <code>.async()</code> or <code>.errback()</code> is called on the <code>gensync()</code> result, or when the result is passed to <code>yield*</code> in another generator that is being run asynchronously.</p>
<p class="startli">This option allows for simpler compatibility with many existing Node APIs, and also avoids introducing the extra even loop turns that promises introduce to access the result value.</p>
</li>
<li><p class="startli"><code>opts.name</code></p>
<p class="startli">Example: <code>"readFile"</code></p>
<p class="startli">A string name to apply to the returned function. If no value is provided, the name of <code>errback</code>/<code>async</code>/<code>sync</code> functions will be used, with any <code>Sync</code> or <code>Async</code> suffix stripped off. If the callback is simply named with ES6 inference (same name as the options property), the name is ignored.</p>
</li>
<li><p class="startli"><code>opts.arity</code></p>
<p class="startli">Example: <code>4</code></p>
<p class="startli">A number for the length to set on the returned function. If no value is provided, the length will be carried over from the <code>sync</code> function's <code>length</code> value.</p>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md10577"></a>
Example</h4>
<div class="fragment"><div class="line">const readFile = gensync({</div>
<div class="line">  sync: fs.readFileSync,</div>
<div class="line">  errback: fs.readFile,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const code = readFile.sync(&quot;./file.js&quot;, &quot;utf8&quot;);</div>
<div class="line">readFile.async(&quot;./file.js&quot;, &quot;utf8&quot;).then(code =&gt; {})</div>
<div class="line">readFile.errback(&quot;./file.js&quot;, &quot;utf8&quot;, (err, code) =&gt; {});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10578"></a>
gensync.all(iterable)</h2>
<p><code>Promise.all</code>-like combinator that works with an iterable of generator objects that could be passed to <code>yield*</code> within a gensync generator.</p>
<h3><a class="anchor" id="autotoc_md10579"></a>
Example</h3>
<div class="fragment"><div class="line">const loadFiles = gensync(function* () {</div>
<div class="line">  return yield* gensync.all([</div>
<div class="line">    readFile(&quot;./one.js&quot;),</div>
<div class="line">    readFile(&quot;./two.js&quot;),</div>
<div class="line">    readFile(&quot;./three.js&quot;),</div>
<div class="line">  ]);</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10580"></a>
gensync.race(iterable)</h2>
<p><code>Promise.race</code>-like combinator that works with an iterable of generator objects that could be passed to <code>yield*</code> within a gensync generator.</p>
<h3><a class="anchor" id="autotoc_md10581"></a>
Example</h3>
<div class="fragment"><div class="line">const loadFiles = gensync(function* () {</div>
<div class="line">  return yield* gensync.race([</div>
<div class="line">    readFile(&quot;./one.js&quot;),</div>
<div class="line">    readFile(&quot;./two.js&quot;),</div>
<div class="line">    readFile(&quot;./three.js&quot;),</div>
<div class="line">  ]);</div>
<div class="line">});</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
