<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: Changelog for jasminewd2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_jasminewd2__c_h_a_n_g_e_l_o_g.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Changelog for jasminewd2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md13179"></a>
2.2.0</h1>
<h2><a class="anchor" id="autotoc_md13180"></a>
Dependencies</h2>
<p>Update selenium-webdriverjs to 3.5.0.</p>
<h1><a class="anchor" id="autotoc_md13181"></a>
2.1.0</h1>
<h2><a class="anchor" id="autotoc_md13182"></a>
Features</h2>
<ul>
<li>(<a href="https://github.com/angular/jasminewd/commit/41577a5e10420d255fb2ec12aa0ea3a8e72f14ca">41577a5</a>) support native async functions (node 7.6+) (#87)</li>
</ul>
<h2><a class="anchor" id="autotoc_md13183"></a>
Bug Fixes</h2>
<ul>
<li>(<a href="https://github.com/angular/jasminewd/commit/0137d3f2ae96ef6d51d00055d64b5a8103ae83d0">0137d3f</a>) minor fix to keep stack from original error (#86)</li>
<li>(<a href="https://github.com/angular/jasminewd/commit/374f4946972673f86e06a011e20fc039bb73e234">374f494</a>) Allow to specify a function as a custom matcher's message. (#29)</li>
</ul>
<h1><a class="anchor" id="autotoc_md13184"></a>
2.0.0</h1>
<p>(Skipping 1.x because <code>0.0.1</code> was originally accidently published as <code>1.0.0</code>.)</p>
<h2><a class="anchor" id="autotoc_md13185"></a>
Breaking changes</h2>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/protractor/commit/fae803cd294e5413523d37bdaa282a9f96cd65a1">fae803c</a>) pass webdriver instance into <code>init()</code> instead of using <code>require()</code> (#83)</p>
<p class="startli">So where as before you would write:</p>
</li>
</ul>
<div class="fragment"><div class="line">require(&#39;jasminewd&#39;).init(webdriver.promise.controlFlow());</div>
</div><!-- fragment --><p>Now you will write:</p>
<div class="fragment"><div class="line">require(&#39;jasminewd&#39;).init(webdriver.promise.controlFlow(), webdriver);</div>
</div><!-- fragment --><p>This removes the dependency on <code>selenium-webdriver</code> and protects jasminewd from having a different webdriver instance than Protractor, which could be a huge problem if they had different control flow settings.</p>
<p>This is a breaking change because it changes the API for the <code>init</code> function.</p>
<p>I also removed the dependency on jasmine, which didn't do anything anyway. Maybe it should have been a peerDependency but those are deprecated.</p>
<h2><a class="anchor" id="autotoc_md13186"></a>
Features</h2>
<ul>
<li>(<a href="https://github.com/angular/protractor/commit/171cbde22f307bd3cc35c4c1785f171392dca8da">171cbde</a>) Added types (though you'll have to wait for <code>@types/jasminewd2</code> to use them) (#79)</li>
<li><p class="startli">(<a href="https://github.com/angular/protractor/commit/27b485019589cd662ee69e7920893ffa50774b97">27b4850</a>) Support <code>SELENIUM_PROMISE_MANAGER=0</code> (#72)</p>
<p class="startli">There are three major ways this was done in this change:</p><ul>
<li>In <code>callWhenIdle</code>, if <code>flow.isIdle</code> is not defined, we assume we are working with a <code>SimpleScheduler</code> instance, and so the flow is effectively idle.</li>
<li>In <code>initJasmineWd</code>, if <code>flow.reset</code> is not defined, we assume we are working with a <code>SimpleScheduler</code> instance, and so don't bother resetting the flow.</li>
<li>In <code>wrapInControlFlow</code>, we use <code>flow.promise</code> to create a new promise if possible. Since <code>new webdriver.promise.Promise()</code> would have always made a <code>ManagedPromise</code>, but <code>flow.promise</code> will do the right thing.</li>
<li>In <code>wrapCompare</code>, we avoid the webdriver library entirely, and never instance any extra promises. Using <code>webdriver.promise.when</code> and <code>webdriver.promise.all</code> could have been a problem if our instance of <code>webdriver</code> had the control flow turned on, but another instance somewhere did not (or even the same instance, but just at a different point in time). Instead we use the new <code>maybePromise</code> tool, which is a mess but is also exactly what we want.</li>
<li>In <code>specs/*</code>, we replace <code>webdriver.promise.fulfilled</code> with <code>webdriver.promise.when</code>.</li>
<li>In <code>specs/*</code>, a new version of <code>adapterSpec.js</code> and <code>errorSpec.js</code> are created: <code>asyncAwaitAdapterSpec.ts</code> and <code>asyncAwaitErrorSpec.ts</code>.</li>
</ul>
<p class="startli">I also also fixed a minor bug where we weren't correctly checking for promises inside an array of expected results. Before we had:</p>
</li>
</ul>
<div class="fragment"><div class="line">expected = Array.prototype.slice.call(arguments, 0);</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">webdriver.promise.isPromise(expected);</div>
</div><!-- fragment --><p>I thought about it for a little while, and there's no way that's correct. <code>expected</code> is an <code>Array&lt;any&gt;</code>, there's no way it has a <code>.then</code> function.</p>
<p>Closes <a href="https://github.com/angular/jasminewd/issues/69">https://github.com/angular/jasminewd/issues/69</a></p>
<h2><a class="anchor" id="autotoc_md13187"></a>
Bug Fixes</h2>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/protractor/commit/369a2499189fbcdc541f354cfede49dba9335e6b">369a249</a>) Don't rely on <code>webdriver.promise</code> functions (#82)</p>
<p class="startli">While we support <code>SELENIUM_PROMISE_MANAGER=0</code> already, we rely on <code>SimpleScheduler</code> and some other utility functions which will be going away after the control flow has been fully deprecated. This commit allows jasminewd to work without those utility functions, and even allows people to pass jasminewd their own custom scheduler implementation.</p>
<p class="startli">This does not fix our tests, which will also break when those utility functions go away. See <a href="https://github.com/angular/jasminewd/issues/81">https://github.com/angular/jasminewd/issues/81</a></p>
<p class="startli">Closes <a href="https://github.com/angular/jasminewd/issues/80">https://github.com/angular/jasminewd/issues/80</a></p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13188"></a>
0.1.1</h1>
<ul>
<li>(<a href="https://github.com/angular/jasminewd/commit/cf1cd34a4089b6492160349a10d717c7bcaa2c31">cf1cd34</a>) chore(isPromise): revert expose deferred object's promise (#78)</li>
</ul>
<h1><a class="anchor" id="autotoc_md13189"></a>
0.1.0</h1>
<p>Release for the selenium-webdriver 3.0.1 upgrade.</p>
<h1><a class="anchor" id="autotoc_md13190"></a>
0.1.0-beta.1</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/5fe36a60102b9033180d68b238ab233a25a52393">5fe36a6</a>) deps(selenium-webdriver): upgrade to 3.0.0 (#63)</p>
<p class="startli">fix test "should wait till the expect to run the flow"</p><ul>
<li><code>isPending</code> exists but it is no longer part of <code>ManagedPromise</code></li>
<li><code>isPending</code> also is no longer exported in <code>lib/promise.js</code></li>
<li>wrote an <code>isPending</code> similar to selenium-webdriver in common.js require a minimum node version</li>
<li>selenium-webdriver 3.0.0 requires node &gt;= 6.9.0</li>
<li>update travis test to use node 6</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13191"></a>
0.1.0-beta.0</h1>
<p>This beta release is for the selenium-webdriver 3.0.0-beta-3 upgrade.</p>
<h2><a class="anchor" id="autotoc_md13192"></a>
Dependencies</h2>
<ul>
<li>(<a href="https://github.com/angular/jasminewd/commit/70c9f62af50018bea6ad326e12bacd9ca03e6ae5">70c9f62</a>) upgrade(isPromise): expose the deferred object's promise (#58)<ul>
<li>isPromise checks to see if the input parameter has a then method</li>
<li>Deferred class has a promise property and no longer has a then method</li>
</ul>
</li>
<li>(<a href="https://github.com/angular/jasminewd/commit/88703656b4f8a012a084ba184a4fe473f423a200">8870365</a>) deps(selenium-webdriver): upgrade to 3.0.0-beta-3 (#57)</li>
</ul>
<h1><a class="anchor" id="autotoc_md13193"></a>
0.0.10</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/ff2e624159344cd83b04c6a6648334ba12e78ea6">ff2e624</a>) fix(webdriver): Pass in the control flow.</p>
<p class="startli">BREAKING CHANGE: The control flow now needs to be passed in when using jasminewd. This fixes an issue where having multiple versions of selenium-webdriver in a package's dependency tree would result in jasminewd and protractor using different control flows. You now have to initialize jasminewd before you can use it, like so: &lsquo;require('jasminewd2&rsquo;).init(webdriver.promise.controlFlow());`</p>
<p class="startli">See <a href="https://github.com/angular/protractor/issues/3505">https://github.com/angular/protractor/issues/3505</a></p>
</li>
<li>(<a href="https://github.com/angular/jasminewd/commit/db26b1a1e66477a6f526dac56ecaaa50d2cf4700">db26b1a</a>) fix(stacktrace): do not crash if beforeEach block is rejected without any stated reason (#45)</li>
</ul>
<h1><a class="anchor" id="autotoc_md13194"></a>
0.0.9</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/protractor/commit/790c81eb0aba880fffbdcb4e834eb2161141620c">790c81e</a>) fix(expectations): allow custom matchers to return a promise when actual is not a promise</p>
<p class="startli">See angular/protractor#2964</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13195"></a>
0.0.8</h1>
<ul>
<li>(<a href="https://github.com/angular/protractor/commit/5abc7457cd73a4a4ba70b3c9ceeadac6d42bbd76">5abc745</a>) chore(jasmine): update MatchFactory to allow message as function</li>
<li><p class="startli">(<a href="https://github.com/angular/protractor/commit/750898c90a1cc1bef09384b60ef6e15adfe734f7">750898c</a>) fix(expectation): expectations without promises no longer add to task queue</p>
<p class="startli">Instead, expectations without promises in either expected or actual are unchanged from the original Jasmine implementation.</p>
<p class="startli">See <a href="https://github.com/angular/protractor/issues/2894">https://github.com/angular/protractor/issues/2894</a></p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13196"></a>
0.0.7</h1>
<ul>
<li>(<a href="https://github.com/angular/protractor/commit/55fd11e69c2f1ba8fba9a19a8acccbe933896084">55fd11e</a>) fix(index): forward it's return value</li>
<li>(<a href="https://github.com/angular/protractor/commit/f4c30a0023c6ec33b15df762226c3fe8e741d26e">f4c30a0</a>) fix: allow empty it functions</li>
</ul>
<h1><a class="anchor" id="autotoc_md13197"></a>
0.0.6</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/4776c16b9a9f3a9a3de8a8dddc0e051cb32331b4">4776c16</a>) chore(selenium-webdriver): update selenium webdriver to 2.47.0</p>
<p class="startli">Update selenium-webdriver to 2.47.0 from 2.45.1. This update introduces a convoluted situation where some tests in Proractor's suite would hang - see <a href="https://github.com/angular/protractor/issues/2245">https://github.com/angular/protractor/issues/2245</a></p>
<p class="startli">This change includes a fix for those issues which removes the explicit <code>flow.execute</code> wrapper around <code>expect</code> calls. This appears not to introduce any issues to existing tests.</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13198"></a>
0.0.5</h1>
<ul>
<li>(<a href="https://github.com/angular/jasminewd/commit/037c7de7fea4de068734b6fa250d145800863633">037c7de</a>) chore(dependencies): update Jasmine to 2.3.1</li>
</ul>
<h1><a class="anchor" id="autotoc_md13199"></a>
0.0.4</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/8f8b8b39e779559fd3b29b138d7577658b8a64b7">8f8b8b3</a>) tests(context): test that the <code>this</code> variable points to the right thing</p>
<p class="startli">Note: this means that using <code>this.addMatchers</code> no longer works inside before blocks or specs. It should have been changed to <code>jamsine.addMatchers</code> since the upgrade to Jasmine 2. It was still working by accident up until the previous commit.</p>
</li>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/c0f13d254966c859db22d020a5390138dbf48e64">c0f13d2</a>) refactor(asyncTestFn): refactor async test wrapping to show more info</p>
<p class="startli">Test wrapping for Jasmine 2 now more closely follows the test wrapping for Mocha at <a href="https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/testing/index.js">https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/testing/index.js</a></p>
<p class="startli">This also adds more information to the task names in the control flow, for easier debugging.</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md13200"></a>
0.0.3</h1>
<ul>
<li><p class="startli">(<a href="https://github.com/angular/jasminewd/commit/161e1fa48deaa5ea0f485027ea8ae41562864936">161e1fa</a>) fix(errors): update webdriverjs, fix asynchronous error output</p>
<p class="startli">Add some console logging, remove useless info about the last running task in the control flow, and fix error where problems reported from done.fail were getting pushed into the following spec.</p>
<p class="startli">Closes #18</p>
</li>
<li>(<a href="https://github.com/angular/jasminewd/commit/fdb03a388d4846952c09fb0ad75a37b46674c750">fdb03a3</a>) docs(readme): add note about jasmine 1 vs jasmine 2</li>
<li>(<a href="https://github.com/angular/jasminewd/commit/acaec8bdd157e9933d608c66204a52335fb46ee4">acaec8b</a>) feat(index): add jasmine2.0 support </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
