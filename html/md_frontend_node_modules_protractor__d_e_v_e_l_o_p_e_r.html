<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: Building and Testing Protractor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_protractor__d_e_v_e_l_o_p_e_r.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building and Testing Protractor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes building, testing, releasing Protractor and provides an overview of the repository layout.</p>
<h1><a class="anchor" id="autotoc_md21797"></a>
Prerequisite software</h1>
<p>The prerequisite software (Node.js, npm, git, jdk) are the same as for angular. See <a href="https://github.com/angular/angular/blob/master/docs/DEVELOPER.md#prerequisite-software">https://github.com/angular/angular/blob/master/docs/DEVELOPER.md#prerequisite-software</a></p>
<h1><a class="anchor" id="autotoc_md21798"></a>
Getting the sources</h1>
<p>Fork Protractor from github, then clone your fork with:</p>
<div class="fragment"><div class="line">git clone git@github.com:&lt;github username&gt;/protractor.git</div>
<div class="line"> </div>
<div class="line"># Go to the Protractor directory:</div>
<div class="line">cd protractor/</div>
<div class="line"> </div>
<div class="line"># Add the main protractor repository as an upstream remote to your repository:</div>
<div class="line">git remote add upstream https://github.com/angular/protractor.git</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21799"></a>
Installing and Building</h1>
<p>All Protractor dependencies come from npm. Install with:</p>
<div class="fragment"><div class="line">npm install</div>
</div><!-- fragment --><p>This will also trigger our build step. The build step runs the TypeScript compiler and copies necessary files into the output <code>built</code> directory. To run the build step independently, run:</p>
<div class="fragment"><div class="line">npm run prepublish</div>
</div><!-- fragment --><p>You can see the other available npm scripts in <code>package.json</code>. Note that most of these scripts just call our <code>gulp</code> commands, which can be seen in <code>gulpfile.js</code>.</p>
<h1><a class="anchor" id="autotoc_md21800"></a>
Formatting</h1>
<p>Protractor uses clang-format to format the source code. If the source code is not properly formatted, the CI will fail and the PR can not be merged.</p>
<p>You can automatically format your code by running:</p>
<div class="fragment"><div class="line">npm run format</div>
</div><!-- fragment --><p>You can check that you will pass lint tests with:</p>
<div class="fragment"><div class="line">gulp lint</div>
<div class="line"> </div>
<div class="line"># or if you don&#39;t have gulp installed globally:</div>
<div class="line">./node_modules/.bin/gulp lint</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21801"></a>
Code layout</h1>
<p><code>docs/</code> contains markdown documentation files. <code>lib/</code> contains the actual Protractor code. <code>scripts/</code> contains scripts used for CI setup and running tests. <code>spec/</code> contains e2e and unit tests and configuration files for tests. <code>testapp/</code> contains the code for the Angular applications that e2e tests run against. <code>website/</code> contains code for generating Protractor API documentation and the website at protractortest.org.</p>
<p>Most of the code is written in TypeScript, with the exception of a few js files.</p>
<p><code>lib/debugger</code> is for element explorer, <code>browser.pause</code> and <code>browser.explore</code>. <code>lib/driverProviders</code> controls how WebDriver instances are created. <code>lib/frameworks</code> contains adapters for test frameworks such as Jasmine and Mocha. <code>lib/selenium-webdriver</code> and <code>lib/webdriver-js-extender</code> are used ONLY for API documentation generation.</p>
<h1><a class="anchor" id="autotoc_md21802"></a>
Lightning Code Walkthrough</h1>
<p>TBD.</p>
<h1><a class="anchor" id="autotoc_md21803"></a>
Testing</h1>
<p>Run <code>npm test</code> to run the full test suite. This assumes that you have the testapp and a selenium server running. Start these as separate processes with:</p>
<div class="fragment"><div class="line">webdriver-manager update</div>
<div class="line">webdriver-manager start</div>
</div><!-- fragment --><p>and</p>
<div class="fragment"><div class="line">npm start</div>
</div><!-- fragment --><p>This suite is described in <code>scripts/test.js</code>. It uses some small helper functions to run commands as child processes and capture the results, so that we can run protractor commands which should result in failures and verify that we get the expected number and type of failures.</p>
<p>The suite contains unit tests, end to end tests using the built binary, and interactive tests. Interactive tests are for testing <code>browser.pause</code> and element explorer.</p>
<p>End to end tests all have configuration files which live in <code>spec/</code>. Many tests do not need an actual Selenium server backing them and use the <code>mockSelenium</code> configuration, which saves time by not connecting to a real selenium server.</p>
<h1><a class="anchor" id="autotoc_md21804"></a>
Important dependencies</h1>
<p>Protractor has very close dependencies with several other projects under the Angular umbrella:</p>
<p><code>jasminewd2</code> is an extension of the Jasmine test framework that adds utilities for working with selenium-webdriver. <a href="https://github.com/angular/jasminewd">jasminewd</a></p>
<p><code>blocking-proxy</code> is a separate binary, which handles traffic between a test script and webdriver. It can be turned on via a protractor configuration file, and in the future all logic to wait for Angular will be handled through the blocking proxy. <a href="https://github.com/angular/blocking-proxy">blocking-proxy</a></p>
<p><code>webdriver-manager</code> is a separate binary which manages installing and starting up the various binaries necessary for running webdriver tests. These binaries include specific drivers for various browsers (e.g. chromedriver) and the selenium standalone server. <a href="https://github.com/angular/webdriver-manager">webdriver-manager</a></p>
<p><code>webdriver-js-extender</code> extends selenium-webdriver to add Appium commands. <a href="https://github.com/angular/webdriver-js-extender">webdriver-js-extender</a></p>
<h1><a class="anchor" id="autotoc_md21805"></a>
Continuous Integration</h1>
<p>PRs or changes submitted to master will automatically trigger continuous integration on two different services - Travis, and Circle CI. We use Travis for tests run with SauceLabs because we have more vm time on Travis and their integration with SauceLabs is smooth. CircleCI gives us greater control over the vm, which allows us to run tests against local browsers and get better logs.</p>
<p>Travis runs e2e tests via SauceLabs against a variety of browsers. The essential browsers run a more complete test suite, <code>specified by spec/ciFullConf.js</code>. We also run a set of smoke tests against a larger set of browsers, which is allowed to fail - this is configured in <code>spec/ciSmokeConf.js</code>. This is due to flakiness in IE, Safari and older browser versions. We also run a small set of tests using BrowserStack to verify that our integration with their Selenium farm works.</p>
<p>Circle CI runs a slightly modified version of <code>npm test</code> in a single VM. It installs the browsers it needs locally. Circle CI runs unit tests and a set of e2e tests against Chrome.</p>
<h1><a class="anchor" id="autotoc_md21806"></a>
Releasing</h1>
<p>See <a href="https://github.com/angular/protractor/blob/master/release.md">release.md</a> for full instructions. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
