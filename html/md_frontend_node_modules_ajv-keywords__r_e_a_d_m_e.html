<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: ajv-keywords</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_ajv-keywords__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ajv-keywords </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Custom JSON-Schema keywords for <a href="https://github.com/epoberezkin/ajv">Ajv</a> validator</p>
<p><a href="https://travis-ci.org/ajv-validator/ajv-keywords"><img src="https://travis-ci.org/ajv-validator/ajv-keywords.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/v/ajv-keywords.svg" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/dm/ajv-keywords.svg" alt="npm downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/ajv-validator/ajv-keywords?branch=master"><img src="https://coveralls.io/repos/github/ajv-validator/ajv-keywords/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://app.dependabot.com/accounts/ajv-validator/repos/60477053"><img src="https://api.dependabot.com/badges/status?host=github&amp;repo=ajv-validator/ajv-keywords" alt="Dependabot" class="inline"/></a> <a href="https://gitter.im/ajv-validator/ajv"><img src="https://img.shields.io/gitter/room/ajv-validator/ajv.svg" alt="Gitter" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md2699"></a>
Contents</h1>
<ul>
<li><a href="#install">Install</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#keywords">Keywords</a><ul>
<li><a href="#types">Types</a><ul>
<li><a href="#typeof">typeof</a></li>
<li><a href="#instanceof">instanceof</a></li>
</ul>
</li>
<li><a href="#keywords-for-numbers">Keywords for numbers</a><ul>
<li><a href="#range-and-exclusiverange">range and exclusiveRange</a></li>
</ul>
</li>
<li><a href="#keywords-for-strings">Keywords for strings</a><ul>
<li><a href="#regexp">regexp</a></li>
<li><a href="#formatmaximum--formatminimum-and-formatexclusivemaximum--formatexclusiveminimum">formatMaximum / formatMinimum and formatExclusiveMaximum / formatExclusiveMinimum</a></li>
<li><a href="#transform">transform</a><sup>*</sup></li>
</ul>
</li>
<li><a href="#keywords-for-arrays">Keywords for arrays</a><ul>
<li><a href="#uniqueitemproperties">uniqueItemProperties</a></li>
</ul>
</li>
<li><a href="#keywords-for-objects">Keywords for objects</a><ul>
<li><a href="#allrequired">allRequired</a></li>
<li><a href="#anyrequired">anyRequired</a></li>
<li><a href="#onerequired">oneRequired</a></li>
<li><a href="#patternrequired">patternRequired</a></li>
<li><a href="#prohibited">prohibited</a></li>
<li><a href="#deepproperties">deepProperties</a></li>
<li><a href="#deeprequired">deepRequired</a></li>
</ul>
</li>
<li><a href="#compound-keywords">Compound keywords</a><ul>
<li><a href="#switch">switch</a> (deprecated)</li>
<li><a href="#selectselectcasesselectdefault">select/selectCases/selectDefault</a> (BETA)</li>
</ul>
</li>
<li><a href="#keywords-for-all-types">Keywords for all types</a><ul>
<li><a href="#dynamicdefaults">dynamicDefaults</a><sup>*</sup></li>
</ul>
</li>
</ul>
</li>
<li><a href="#security-contact">Security contact</a></li>
<li><a href="#open-source-software-support">Open-source software support</a></li>
<li><a href="#license">License</a></li>
</ul>
<p><sup>*</sup> - keywords that modify data</p>
<h1><a class="anchor" id="autotoc_md2700"></a>
Install</h1>
<div class="fragment"><div class="line">npm install ajv-keywords</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2701"></a>
Usage</h1>
<p>To add all available keywords:</p>
<div class="fragment"><div class="line">var Ajv = require(&#39;ajv&#39;);</div>
<div class="line">var ajv = new Ajv;</div>
<div class="line">require(&#39;ajv-keywords&#39;)(ajv);</div>
<div class="line"> </div>
<div class="line">ajv.validate({ instanceof: &#39;RegExp&#39; }, /.*/); // true</div>
<div class="line">ajv.validate({ instanceof: &#39;RegExp&#39; }, &#39;.*&#39;); // false</div>
</div><!-- fragment --><p>To add a single keyword:</p>
<div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, &#39;instanceof&#39;);</div>
</div><!-- fragment --><p>To add multiple keywords:</p>
<div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, [&#39;typeof&#39;, &#39;instanceof&#39;]);</div>
</div><!-- fragment --><p>To add a single keyword in browser (to avoid adding unused code):</p>
<div class="fragment"><div class="line">require(&#39;ajv-keywords/keywords/instanceof&#39;)(ajv);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2702"></a>
Keywords</h1>
<h2><a class="anchor" id="autotoc_md2703"></a>
Types</h2>
<h3><a class="anchor" id="autotoc_md2704"></a>
&lt;tt&gt;typeof&lt;/tt&gt;</h3>
<p>Based on JavaScript <code>typeof</code> operation.</p>
<p>The value of the keyword should be a string (<code>"undefined"</code>, <code>"string"</code>, <code>"number"</code>, <code>"object"</code>, <code>"function"</code>, <code>"boolean"</code> or <code>"symbol"</code>) or array of strings.</p>
<p>To pass validation the result of <code>typeof</code> operation on the value should be equal to the string (or one of the strings in the array).</p>
<div class="fragment"><div class="line">ajv.validate({ typeof: &#39;undefined&#39; }, undefined); // true</div>
<div class="line">ajv.validate({ typeof: &#39;undefined&#39; }, null); // false</div>
<div class="line">ajv.validate({ typeof: [&#39;undefined&#39;, &#39;object&#39;] }, null); // true</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2705"></a>
&lt;tt&gt;instanceof&lt;/tt&gt;</h3>
<p>Based on JavaScript <code>instanceof</code> operation.</p>
<p>The value of the keyword should be a string (<code>"Object"</code>, <code>"Array"</code>, <code>"Function"</code>, <code>"Number"</code>, <code>"String"</code>, <code>"Date"</code>, <code>"RegExp"</code>, <code>"Promise"</code> or <code>"Buffer"</code>) or array of strings.</p>
<p>To pass validation the result of <code>data instanceof ...</code> operation on the value should be true:</p>
<div class="fragment"><div class="line">ajv.validate({ instanceof: &#39;Array&#39; }, []); // true</div>
<div class="line">ajv.validate({ instanceof: &#39;Array&#39; }, {}); // false</div>
<div class="line">ajv.validate({ instanceof: [&#39;Array&#39;, &#39;Function&#39;] }, function(){}); // true</div>
</div><!-- fragment --><p>You can add your own constructor function to be recognised by this keyword:</p>
<div class="fragment"><div class="line">function MyClass() {}</div>
<div class="line">var instanceofDefinition = require(&#39;ajv-keywords&#39;).get(&#39;instanceof&#39;).definition;</div>
<div class="line">// or require(&#39;ajv-keywords/keywords/instanceof&#39;).definition;</div>
<div class="line">instanceofDefinition.CONSTRUCTORS.MyClass = MyClass;</div>
<div class="line"> </div>
<div class="line">ajv.validate({ instanceof: &#39;MyClass&#39; }, new MyClass); // true</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2706"></a>
Keywords for numbers</h2>
<h3><a class="anchor" id="autotoc_md2707"></a>
&lt;tt&gt;range&lt;/tt&gt; and &lt;tt&gt;exclusiveRange&lt;/tt&gt;</h3>
<p>Syntax sugar for the combination of minimum and maximum keywords, also fails schema compilation if there are no numbers in the range.</p>
<p>The value of this keyword must be the array consisting of two numbers, the second must be greater or equal than the first one.</p>
<p>If the validated value is not a number the validation passes, otherwise to pass validation the value should be greater (or equal) than the first number and smaller (or equal) than the second number in the array. If <code>exclusiveRange</code> keyword is present in the same schema and its value is true, the validated value must not be equal to the range boundaries.</p>
<div class="fragment"><div class="line">var schema = { range: [1, 3] };</div>
<div class="line">ajv.validate(schema, 1); // true</div>
<div class="line">ajv.validate(schema, 2); // true</div>
<div class="line">ajv.validate(schema, 3); // true</div>
<div class="line">ajv.validate(schema, 0.99); // false</div>
<div class="line">ajv.validate(schema, 3.01); // false</div>
<div class="line"> </div>
<div class="line">var schema = { range: [1, 3], exclusiveRange: true };</div>
<div class="line">ajv.validate(schema, 1.01); // true</div>
<div class="line">ajv.validate(schema, 2); // true</div>
<div class="line">ajv.validate(schema, 2.99); // true</div>
<div class="line">ajv.validate(schema, 1); // false</div>
<div class="line">ajv.validate(schema, 3); // false</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2708"></a>
Keywords for strings</h2>
<h3><a class="anchor" id="autotoc_md2709"></a>
&lt;tt&gt;regexp&lt;/tt&gt;</h3>
<p>This keyword allows to use regular expressions with flags in schemas (the standard <code>pattern</code> keyword does not support flags).</p>
<p>This keyword applies only to strings. If the data is not a string, the validation succeeds.</p>
<p>The value of this keyword can be either a string (the result of <code>regexp.toString()</code>) or an object with the properties <code>pattern</code> and <code>flags</code> (the same strings that should be passed to RegExp constructor).</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  type: &#39;object&#39;,</div>
<div class="line">  properties: {</div>
<div class="line">    foo: { regexp: &#39;/foo/i&#39; },</div>
<div class="line">    bar: { regexp: { pattern: &#39;bar&#39;, flags: &#39;i&#39; } }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = {</div>
<div class="line">  foo: &#39;Food&#39;,</div>
<div class="line">  bar: &#39;Barmen&#39;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var invalidData = {</div>
<div class="line">  foo: &#39;fog&#39;,</div>
<div class="line">  bar: &#39;bad&#39;</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2710"></a>
&lt;tt&gt;formatMaximum&lt;/tt&gt; / &lt;tt&gt;formatMinimum&lt;/tt&gt; and &lt;tt&gt;formatExclusiveMaximum&lt;/tt&gt; / &lt;tt&gt;formatExclusiveMinimum&lt;/tt&gt;</h3>
<p>These keywords allow to define minimum/maximum constraints when the format keyword defines ordering.</p>
<p>These keywords apply only to strings. If the data is not a string, the validation succeeds.</p>
<p>The value of keyword <code>formatMaximum</code> (<code>formatMinimum</code>) should be a string. This value is the maximum (minimum) allowed value for the data to be valid as determined by <code>format</code> keyword. If <code>format</code> is not present schema compilation will throw exception.</p>
<p>When this keyword is added, it defines comparison rules for formats <code>"date"</code>, <code>"time"</code> and <code>"date-time"</code>. Custom formats also can have comparison rules. See <a href="https://github.com/epoberezkin/ajv#api-addformat">addFormat</a> method.</p>
<p>The value of keyword <code>formatExclusiveMaximum</code> (<code>formatExclusiveMinimum</code>) should be a boolean value. These keyword cannot be used without <code>formatMaximum</code> (<code>formatMinimum</code>). If this keyword value is equal to <code>true</code>, the data to be valid should not be equal to the value in <code>formatMaximum</code> (<code>formatMinimum</code>) keyword.</p>
<div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, [&#39;formatMinimum&#39;, &#39;formatMaximum&#39;]);</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  format: &#39;date&#39;,</div>
<div class="line">  formatMinimum: &#39;2016-02-06&#39;,</div>
<div class="line">  formatMaximum: &#39;2016-12-27&#39;,</div>
<div class="line">  formatExclusiveMaximum: true</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">var validDataList = [&#39;2016-02-06&#39;, &#39;2016-12-26&#39;, 1];</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [&#39;2016-02-05&#39;, &#39;2016-12-27&#39;, &#39;abc&#39;];</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2711"></a>
&lt;tt&gt;transform&lt;/tt&gt;</h3>
<p>This keyword allows a string to be modified before validation.</p>
<p>These keywords apply only to strings. If the data is not a string, the transform is skipped.</p>
<p>There are limitation due to how ajv is written:</p><ul>
<li>a stand alone string cannot be transformed. ie &lsquo;data = 'a&rsquo;; ajv.validate(schema, data);<code></code></li>
<li><code>currently cannot work with</code>ajv-pack`</li>
</ul>
<p><b>Supported options:</b></p><ul>
<li><code>trim</code>: remove whitespace from start and end</li>
<li><code>trimLeft</code>: remove whitespace from start</li>
<li><code>trimRight</code>: remove whitespace from end</li>
<li><code>toLowerCase</code>: case string to all lower case</li>
<li><code>toUpperCase</code>: case string to all upper case</li>
<li><code>toEnumCase</code>: case string to match case in schema</li>
</ul>
<p>Options are applied in the order they are listed.</p>
<p>Note: <code>toEnumCase</code> requires that all allowed values are unique when case insensitive.</p>
<p><b>Example: multiple options</b> </p><div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, [&#39;transform&#39;]);</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  type: &#39;array&#39;,</div>
<div class="line">  items: {</div>
<div class="line">    type:&#39;string&#39;,</div>
<div class="line">    transform:[&#39;trim&#39;,&#39;toLowerCase&#39;]</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var data = [&#39;  MixCase  &#39;];</div>
<div class="line">ajv.validate(schema, data);</div>
<div class="line">console.log(data); // [&#39;mixcase&#39;]</div>
</div><!-- fragment --><p><b>Example: <code>enumcase</code></b> </p><div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, [&#39;transform&#39;]);</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  type: &#39;array&#39;,</div>
<div class="line">  items: {</div>
<div class="line">    type:&#39;string&#39;,</div>
<div class="line">    transform:[&#39;trim&#39;,&#39;toEnumCase&#39;],</div>
<div class="line">    enum:[&#39;pH&#39;]</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var data = [&#39;ph&#39;,&#39; Ph&#39;,&#39;PH&#39;,&#39;pH &#39;];</div>
<div class="line">ajv.validate(schema, data);</div>
<div class="line">console.log(data); // [&#39;pH&#39;,&#39;pH&#39;,&#39;pH&#39;,&#39;pH&#39;]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2712"></a>
Keywords for arrays</h2>
<h3><a class="anchor" id="autotoc_md2713"></a>
&lt;tt&gt;uniqueItemProperties&lt;/tt&gt;</h3>
<p>The keyword allows to check that some properties in array items are unique.</p>
<p>This keyword applies only to arrays. If the data is not an array, the validation succeeds.</p>
<p>The value of this keyword must be an array of strings - property names that should have unique values across all items.</p>
<div class="fragment"><div class="line">var schema = { uniqueItemProperties: [ &quot;id&quot;, &quot;name&quot; ] };</div>
<div class="line"> </div>
<div class="line">var validData = [</div>
<div class="line">  { id: 1 },</div>
<div class="line">  { id: 2 },</div>
<div class="line">  { id: 3 }</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">var invalidData1 = [</div>
<div class="line">  { id: 1 },</div>
<div class="line">  { id: 1 }, // duplicate &quot;id&quot;</div>
<div class="line">  { id: 3 }</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">var invalidData2 = [</div>
<div class="line">  { id: 1, name: &quot;taco&quot; },</div>
<div class="line">  { id: 2, name: &quot;taco&quot; }, // duplicate &quot;name&quot;</div>
<div class="line">  { id: 3, name: &quot;salsa&quot; }</div>
<div class="line">];</div>
</div><!-- fragment --><p>This keyword is contributed by <a href="https://github.com/blainesch">@blainesch</a>.</p>
<h2><a class="anchor" id="autotoc_md2714"></a>
Keywords for objects</h2>
<h3><a class="anchor" id="autotoc_md2715"></a>
&lt;tt&gt;allRequired&lt;/tt&gt;</h3>
<p>This keyword allows to require the presence of all properties used in <code>properties</code> keyword in the same schema object.</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value of this keyword must be boolean.</p>
<p>If the value of the keyword is <code>false</code>, the validation succeeds.</p>
<p>If the value of the keyword is <code>true</code>, the validation succeeds if the data contains all properties defined in <code>properties</code> keyword (in the same schema object).</p>
<p>If the <code>properties</code> keyword is not present in the same schema object, schema compilation will throw exception.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  properties: {</div>
<div class="line">    foo: {type: &#39;number&#39;},</div>
<div class="line">    bar: {type: &#39;number&#39;}</div>
<div class="line">  }</div>
<div class="line">  allRequired: true</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = { foo: 1, bar: 2 };</div>
<div class="line">var alsoValidData = { foo: 1, bar: 2, baz: 3 };</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [ {}, { foo: 1 }, { bar: 2 } ];</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2716"></a>
&lt;tt&gt;anyRequired&lt;/tt&gt;</h3>
<p>This keyword allows to require the presence of any (at least one) property from the list.</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value of this keyword must be an array of strings, each string being a property name. For data object to be valid at least one of the properties in this array should be present in the object.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  anyRequired: [&#39;foo&#39;, &#39;bar&#39;]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = { foo: 1 };</div>
<div class="line">var alsoValidData = { foo: 1, bar: 2 };</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [ {}, { baz: 3 } ];</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2717"></a>
&lt;tt&gt;oneRequired&lt;/tt&gt;</h3>
<p>This keyword allows to require the presence of only one property from the list.</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value of this keyword must be an array of strings, each string being a property name. For data object to be valid exactly one of the properties in this array should be present in the object.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  oneRequired: [&#39;foo&#39;, &#39;bar&#39;]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = { foo: 1 };</div>
<div class="line">var alsoValidData = { bar: 2, baz: 3 };</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [ {}, { baz: 3 }, { foo: 1, bar: 2 } ];</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2718"></a>
&lt;tt&gt;patternRequired&lt;/tt&gt;</h3>
<p>This keyword allows to require the presence of properties that match some pattern(s).</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value of this keyword should be an array of strings, each string being a regular expression. For data object to be valid each regular expression in this array should match at least one property name in the data object.</p>
<p>If the array contains multiple regular expressions, more than one expression can match the same property name.</p>
<div class="fragment"><div class="line">var schema = { patternRequired: [ &#39;f.*o&#39;, &#39;b.*r&#39; ] };</div>
<div class="line"> </div>
<div class="line">var validData = { foo: 1, bar: 2 };</div>
<div class="line">var alsoValidData = { foobar: 3 };</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [ {}, { foo: 1 }, { bar: 2 } ];</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2719"></a>
&lt;tt&gt;prohibited&lt;/tt&gt;</h3>
<p>This keyword allows to prohibit that any of the properties in the list is present in the object.</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value of this keyword should be an array of strings, each string being a property name. For data object to be valid none of the properties in this array should be present in the object.</p>
<div class="fragment"><div class="line">var schema = { prohibited: [&#39;foo&#39;, &#39;bar&#39;]};</div>
<div class="line"> </div>
<div class="line">var validData = { baz: 1 };</div>
<div class="line">var alsoValidData = {};</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [</div>
<div class="line">  { foo: 1 },</div>
<div class="line">  { bar: 2 },</div>
<div class="line">  { foo: 1, bar: 2}</div>
<div class="line">];</div>
</div><!-- fragment --><p><b>Please note</b>: &lsquo;{prohibited: ['foo&rsquo;, 'bar']}<code>is equivalent to</code>{not: {anyRequired: ['foo', 'bar']}}` (i.e. it has the same validation result for any data).</p>
<h3><a class="anchor" id="autotoc_md2720"></a>
&lt;tt&gt;deepProperties&lt;/tt&gt;</h3>
<p>This keyword allows to validate deep properties (identified by JSON pointers).</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value should be an object, where keys are JSON pointers to the data, starting from the current position in data, and the values are JSON schemas. For data object to be valid the value of each JSON pointer should be valid according to the corresponding schema.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  type: &#39;object&#39;,</div>
<div class="line">  deepProperties: {</div>
<div class="line">    &quot;/users/1/role&quot;: { &quot;enum&quot;: [&quot;admin&quot;] }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = {</div>
<div class="line">  users: [</div>
<div class="line">    {},</div>
<div class="line">    {</div>
<div class="line">      id: 123,</div>
<div class="line">      role: &#39;admin&#39;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var alsoValidData = {</div>
<div class="line">  users: {</div>
<div class="line">    &quot;1&quot;: {</div>
<div class="line">      id: 123,</div>
<div class="line">      role: &#39;admin&#39;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var invalidData = {</div>
<div class="line">  users: [</div>
<div class="line">    {},</div>
<div class="line">    {</div>
<div class="line">      id: 123,</div>
<div class="line">      role: &#39;user&#39;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var alsoInvalidData = {</div>
<div class="line">  users: {</div>
<div class="line">    &quot;1&quot;: {</div>
<div class="line">      id: 123,</div>
<div class="line">      role: &#39;user&#39;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2721"></a>
&lt;tt&gt;deepRequired&lt;/tt&gt;</h3>
<p>This keyword allows to check that some deep properties (identified by JSON pointers) are available.</p>
<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>
<p>The value should be an array of JSON pointers to the data, starting from the current position in data. For data object to be valid each JSON pointer should be some existing part of the data.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  type: &#39;object&#39;,</div>
<div class="line">  deepRequired: [&quot;/users/1/role&quot;]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validData = {</div>
<div class="line">  users: [</div>
<div class="line">    {},</div>
<div class="line">    {</div>
<div class="line">      id: 123,</div>
<div class="line">      role: &#39;admin&#39;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var invalidData = {</div>
<div class="line">  users: [</div>
<div class="line">    {},</div>
<div class="line">    {</div>
<div class="line">      id: 123</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">};</div>
</div><!-- fragment --><p>See <a href="https://github.com/json-schema-org/json-schema-spec/issues/203#issue-197211916">json-schema-org/json-schema-spec#203</a> for an example of the equivalent schema without <code>deepRequired</code> keyword.</p>
<h2><a class="anchor" id="autotoc_md2722"></a>
Compound keywords</h2>
<h3><a class="anchor" id="autotoc_md2723"></a>
&lt;tt&gt;switch&lt;/tt&gt; (deprecated)</h3>
<p><b>Please note</b>: this keyword is provided to preserve backward compatibility with previous versions of Ajv. It is strongly recommended to use <code>if</code>/<code>then</code>/<code>else</code> keywords instead, as they have been added to the draft-07 of JSON Schema specification.</p>
<p>This keyword allows to perform advanced conditional validation.</p>
<p>The value of the keyword is the array of if/then clauses. Each clause is the object with the following properties:</p>
<ul>
<li><code>if</code> (optional) - the value is JSON-schema</li>
<li><code>then</code> (required) - the value is JSON-schema or boolean</li>
<li><code>continue</code> (optional) - the value is boolean</li>
</ul>
<p>The validation process is dynamic; all clauses are executed sequentially in the following way:</p>
<ol type="1">
<li><code>if</code>:<ol type="a">
<li><code>if</code> property is JSON-schema according to which the data is:<ol type="i">
<li>valid =&gt; go to step 2.</li>
<li>invalid =&gt; go to the NEXT clause, if this was the last clause the validation of <code>switch</code> SUCCEEDS.</li>
</ol>
</li>
<li><code>if</code> property is absent =&gt; go to step 2.</li>
</ol>
</li>
<li><code>then</code>:<ol type="a">
<li><code>then</code> property is <code>true</code> or it is JSON-schema according to which the data is valid =&gt; go to step 3.</li>
<li><code>then</code> property is <code>false</code> or it is JSON-schema according to which the data is invalid =&gt; the validation of <code>switch</code> FAILS.</li>
</ol>
</li>
<li><code>continue</code>:<ol type="a">
<li><code>continue</code> property is <code>true</code> =&gt; go to the NEXT clause, if this was the last clause the validation of <code>switch</code> SUCCEEDS.</li>
<li><code>continue</code> property is <code>false</code> or absent =&gt; validation of <code>switch</code> SUCCEEDS.</li>
</ol>
</li>
</ol>
<div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, &#39;switch&#39;);</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  type: &#39;array&#39;,</div>
<div class="line">  items: {</div>
<div class="line">    type: &#39;integer&#39;,</div>
<div class="line">    &#39;switch&#39;: [</div>
<div class="line">      { if: { not: { minimum: 1 } }, then: false },</div>
<div class="line">      { if: { maximum: 10 }, then: true },</div>
<div class="line">      { if: { maximum: 100 }, then: { multipleOf: 10 } },</div>
<div class="line">      { if: { maximum: 1000 }, then: { multipleOf: 100 } },</div>
<div class="line">      { then: false }</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validItems = [1, 5, 10, 20, 50, 100, 200, 500, 1000];</div>
<div class="line"> </div>
<div class="line">var invalidItems = [1, 0, 2000, 11, 57, 123, &#39;foo&#39;];</div>
</div><!-- fragment --><p>The above schema is equivalent to (for example):</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  type: &#39;array&#39;,</div>
<div class="line">  items: {</div>
<div class="line">    type: &#39;integer&#39;,</div>
<div class="line">    if: { minimum: 1, maximum: 10 },</div>
<div class="line">    then: true,</div>
<div class="line">    else: {</div>
<div class="line">      if: { maximum: 100 },</div>
<div class="line">      then: { multipleOf: 10 },</div>
<div class="line">      else: {</div>
<div class="line">        if: { maximum: 1000 },</div>
<div class="line">        then: { multipleOf: 100 },</div>
<div class="line">        else: false</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2724"></a>
&lt;tt&gt;select&lt;/tt&gt;/&lt;tt&gt;selectCases&lt;/tt&gt;/&lt;tt&gt;selectDefault&lt;/tt&gt;</h3>
<p>These keywords allow to choose the schema to validate the data based on the value of some property in the validated data.</p>
<p>These keywords must be present in the same schema object (<code>selectDefault</code> is optional).</p>
<p>The value of <code>select</code> keyword should be a <a href="https://github.com/epoberezkin/ajv/tree/5.0.2-beta.0#data-reference">$data reference</a> that points to any primitive JSON type (string, number, boolean or null) in the data that is validated. You can also use a constant of primitive type as the value of this keyword (e.g., for debugging purposes).</p>
<p>The value of <code>selectCases</code> keyword must be an object where each property name is a possible string representation of the value of <code>select</code> keyword and each property value is a corresponding schema (from draft-06 it can be boolean) that must be used to validate the data.</p>
<p>The value of <code>selectDefault</code> keyword is a schema (from draft-06 it can be boolean) that must be used to validate the data in case <code>selectCases</code> has no key equal to the stringified value of <code>select</code> keyword.</p>
<p>The validation succeeds in one of the following cases:</p><ul>
<li>the validation of data using selected schema succeeds,</li>
<li>none of the schemas is selected for validation,</li>
<li>the value of select is undefined (no property in the data that the data reference points to).</li>
</ul>
<p>If <code>select</code> value (in data) is not a primitive type the validation fails.</p>
<p><b>Please note</b>: these keywords require Ajv <code>$data</code> option to support <a href="https://github.com/epoberezkin/ajv/tree/5.0.2-beta.0#data-reference">$data reference</a>.</p>
<div class="fragment"><div class="line">require(&#39;ajv-keywords&#39;)(ajv, &#39;select&#39;);</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  type: object,</div>
<div class="line">  required: [&#39;kind&#39;],</div>
<div class="line">  properties: {</div>
<div class="line">    kind: { type: &#39;string&#39; }</div>
<div class="line">  },</div>
<div class="line">  select: { $data: &#39;0/kind&#39; },</div>
<div class="line">  selectCases: {</div>
<div class="line">    foo: {</div>
<div class="line">      required: [&#39;foo&#39;],</div>
<div class="line">      properties: {</div>
<div class="line">        kind: {},</div>
<div class="line">        foo: { type: &#39;string&#39; }</div>
<div class="line">      },</div>
<div class="line">      additionalProperties: false</div>
<div class="line">    },</div>
<div class="line">    bar: {</div>
<div class="line">      required: [&#39;bar&#39;],</div>
<div class="line">      properties: {</div>
<div class="line">        kind: {},</div>
<div class="line">        bar: { type: &#39;number&#39; }</div>
<div class="line">      },</div>
<div class="line">      additionalProperties: false</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">  selectDefault: {</div>
<div class="line">    propertyNames: {</div>
<div class="line">      not: { enum: [&#39;foo&#39;, &#39;bar&#39;] }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var validDataList = [</div>
<div class="line">  { kind: &#39;foo&#39;, foo: &#39;any&#39; },</div>
<div class="line">  { kind: &#39;bar&#39;, bar: 1 },</div>
<div class="line">  { kind: &#39;anything_else&#39;, not_bar_or_foo: &#39;any value&#39; }</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">var invalidDataList = [</div>
<div class="line">  { kind: &#39;foo&#39; }, // no propery foo</div>
<div class="line">  { kind: &#39;bar&#39; }, // no propery bar</div>
<div class="line">  { kind: &#39;foo&#39;, foo: &#39;any&#39;, another: &#39;any value&#39; }, // additional property</div>
<div class="line">  { kind: &#39;bar&#39;, bar: 1, another: &#39;any value&#39; }, // additional property</div>
<div class="line">  { kind: &#39;anything_else&#39;, foo: &#39;any&#39; } // property foo not allowed</div>
<div class="line">  { kind: &#39;anything_else&#39;, bar: 1 } // property bar not allowed</div>
<div class="line">];</div>
</div><!-- fragment --><p><b>Please note</b>: the current implementation is BETA. It does not allow using relative URIs in $ref keywords in schemas in <code>selectCases</code> and <code>selectDefault</code> that point outside of these schemas. The workaround is to use absolute URIs (that can point to any (sub-)schema added to Ajv, including those inside the current root schema where <code>select</code> is used). See <a href="https://github.com/epoberezkin/ajv-keywords/blob/v2.0.0/spec/tests/select.json#L314">tests</a>.</p>
<h2><a class="anchor" id="autotoc_md2725"></a>
Keywords for all types</h2>
<h3><a class="anchor" id="autotoc_md2726"></a>
&lt;tt&gt;dynamicDefaults&lt;/tt&gt;</h3>
<p>This keyword allows to assign dynamic defaults to properties, such as timestamps, unique IDs etc.</p>
<p>This keyword only works if <code>useDefaults</code> options is used and not inside <code>anyOf</code> keywords etc., in the same way as <a href="https://github.com/epoberezkin/ajv#assigning-defaults">default keyword treated by Ajv</a>.</p>
<p>The keyword should be added on the object level. Its value should be an object with each property corresponding to a property name, in the same way as in standard <code>properties</code> keyword. The value of each property can be:</p>
<ul>
<li>an identifier of default function (a string)</li>
<li>an object with properties <code>func</code> (an identifier) and <code>args</code> (an object with parameters that will be passed to this function during schema compilation - see examples).</li>
</ul>
<p>The properties used in <code>dynamicDefaults</code> should not be added to <code>required</code> keyword (or validation will fail), because unlike <code>default</code> this keyword is processed after validation.</p>
<p>There are several predefined dynamic default functions:</p>
<ul>
<li><code>"timestamp"</code> - current timestamp in milliseconds</li>
<li><code>"datetime"</code> - current date and time as string (ISO, valid according to <code>date-time</code> format)</li>
<li><code>"date"</code> - current date as string (ISO, valid according to <code>date</code> format)</li>
<li><code>"time"</code> - current time as string (ISO, valid according to <code>time</code> format)</li>
<li><code>"random"</code> - pseudo-random number in [0, 1) interval</li>
<li><code>"randomint"</code> - pseudo-random integer number. If string is used as a property value, the function will randomly return 0 or 1. If object &lsquo;{ func: 'randomint&rsquo;, args: { max: N } }<code>is used then the default will be an integer number in [0, N) interval. -</code>"seq"<code>- sequential integer number starting from 0. If string is used as a property value, the default sequence will be used. If object</code>{ func: 'seq', args: { name: 'foo'} }<code>is used then the sequence with name</code>"foo"` will be used. Sequences are global, even if different ajv instances are used.</li>
</ul>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  type: &#39;object&#39;,</div>
<div class="line">  dynamicDefaults: {</div>
<div class="line">    ts: &#39;datetime&#39;,</div>
<div class="line">    r: { func: &#39;randomint&#39;, args: { max: 100 } },</div>
<div class="line">    id: { func: &#39;seq&#39;, args: { name: &#39;id&#39; } }</div>
<div class="line">  },</div>
<div class="line">  properties: {</div>
<div class="line">    ts: {</div>
<div class="line">      type: &#39;string&#39;,</div>
<div class="line">      format: &#39;date-time&#39;</div>
<div class="line">    },</div>
<div class="line">    r: {</div>
<div class="line">      type: &#39;integer&#39;,</div>
<div class="line">      minimum: 0,</div>
<div class="line">      exclusiveMaximum: 100</div>
<div class="line">    },</div>
<div class="line">    id: {</div>
<div class="line">      type: &#39;integer&#39;,</div>
<div class="line">      minimum: 0</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var data = {};</div>
<div class="line">ajv.validate(data); // true</div>
<div class="line">data; // { ts: &#39;2016-12-01T22:07:28.829Z&#39;, r: 25, id: 0 }</div>
<div class="line"> </div>
<div class="line">var data1 = {};</div>
<div class="line">ajv.validate(data1); // true</div>
<div class="line">data1; // { ts: &#39;2016-12-01T22:07:29.832Z&#39;, r: 68, id: 1 }</div>
<div class="line"> </div>
<div class="line">ajv.validate(data1); // true</div>
<div class="line">data1; // didn&#39;t change, as all properties were defined</div>
</div><!-- fragment --><p>When using the <code>useDefaults</code> option value <code>"empty"</code>, properties and items equal to <code>null</code> or <code>""</code> (empty string) will be considered missing and assigned defaults. Use the <code>allOf</code> <a href="https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#compound-keywords">compound keyword</a> to execute <code>dynamicDefaults</code> before validation.</p>
<div class="fragment"><div class="line">var schema = {</div>
<div class="line">  allOf: [</div>
<div class="line">    {</div>
<div class="line">      dynamicDefaults: {</div>
<div class="line">        ts: &#39;datetime&#39;,</div>
<div class="line">        r: { func: &#39;randomint&#39;, args: { min: 5, max: 100 } },</div>
<div class="line">        id: { func: &#39;seq&#39;, args: { name: &#39;id&#39; } }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      type: &#39;object&#39;,</div>
<div class="line">      properties: {</div>
<div class="line">        ts: {</div>
<div class="line">          type: &#39;string&#39;</div>
<div class="line">        },</div>
<div class="line">        r: {</div>
<div class="line">          type: &#39;number&#39;,</div>
<div class="line">          minimum: 5,</div>
<div class="line">          exclusiveMaximum: 100</div>
<div class="line">        },</div>
<div class="line">        id: {</div>
<div class="line">          type: &#39;integer&#39;,</div>
<div class="line">          minimum: 0</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var data = { ts: &#39;&#39;, r: null };</div>
<div class="line">ajv.validate(data); // true</div>
<div class="line">data; // { ts: &#39;2016-12-01T22:07:28.829Z&#39;, r: 25, id: 0 }</div>
</div><!-- fragment --><p>You can add your own dynamic default function to be recognised by this keyword:</p>
<div class="fragment"><div class="line">var uuid = require(&#39;uuid&#39;);</div>
<div class="line"> </div>
<div class="line">function uuidV4() { return uuid.v4(); }</div>
<div class="line"> </div>
<div class="line">var definition = require(&#39;ajv-keywords&#39;).get(&#39;dynamicDefaults&#39;).definition;</div>
<div class="line">// or require(&#39;ajv-keywords/keywords/dynamicDefaults&#39;).definition;</div>
<div class="line">definition.DEFAULTS.uuid = uuidV4;</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  dynamicDefaults: { id: &#39;uuid&#39; },</div>
<div class="line">  properties: { id: { type: &#39;string&#39;, format: &#39;uuid&#39; } }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">var data = {};</div>
<div class="line">ajv.validate(schema, data); // true</div>
<div class="line">data; // { id: &#39;a1183fbe-697b-4030-9bcc-cfeb282a9150&#39; };</div>
<div class="line"> </div>
<div class="line">var data1 = {};</div>
<div class="line">ajv.validate(schema, data1); // true</div>
<div class="line">data1; // { id: &#39;5b008de7-1669-467a-a5c6-70fa244d7209&#39; }</div>
</div><!-- fragment --><p>You also can define dynamic default that accepts parameters, e.g. version of uuid:</p>
<div class="fragment"><div class="line">var uuid = require(&#39;uuid&#39;);</div>
<div class="line"> </div>
<div class="line">function getUuid(args) {</div>
<div class="line">  var version = &#39;v&#39; + (arvs &amp;&amp; args.v || 4);</div>
<div class="line">  return function() {</div>
<div class="line">    return uuid[version]();</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">var definition = require(&#39;ajv-keywords&#39;).get(&#39;dynamicDefaults&#39;).definition;</div>
<div class="line">definition.DEFAULTS.uuid = getUuid;</div>
<div class="line"> </div>
<div class="line">var schema = {</div>
<div class="line">  dynamicDefaults: {</div>
<div class="line">    id1: &#39;uuid&#39;, // v4</div>
<div class="line">    id2: { func: &#39;uuid&#39;, v: 4 }, // v4</div>
<div class="line">    id3: { func: &#39;uuid&#39;, v: 1 } // v1</div>
<div class="line">  }</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2727"></a>
Security contact</h1>
<p>To report a security vulnerability, please use the <a href="https://tidelift.com/security">Tidelift security contact</a>. Tidelift will coordinate the fix and disclosure.</p>
<p>Please do NOT report security vulnerabilities via GitHub issues.</p>
<h1><a class="anchor" id="autotoc_md2728"></a>
Open-source software support</h1>
<p>Ajv-keywords is a part of <a href="https://tidelift.com/subscription/pkg/npm-ajv-keywords?utm_source=npm-ajv-keywords&amp;utm_medium=referral&amp;utm_campaign=readme">Tidelift subscription</a> - it provides a centralised support to open-source software users, in addition to the support provided by software maintainers.</p>
<h1><a class="anchor" id="autotoc_md2729"></a>
License</h1>
<p><a href="https://github.com/epoberezkin/ajv-keywords/blob/master/LICENSE">MIT</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
