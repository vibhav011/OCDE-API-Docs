<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: &lt;tt&gt;IntersectionObserver&lt;/tt&gt; polyfill</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_intersection-observer__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><code>IntersectionObserver</code> polyfill </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library polyfills the native <a href="http://w3c.github.io/IntersectionObserver/"><code>IntersectionObserver</code></a> API in unsupporting browsers. See the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">API documentation</a> for usage information.</p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuring-the-polyfill">Configuring the polyfill</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#browser-support">Browser support</a></li>
<li><a href="#running-the-tests">Running the tests</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md12140"></a>
Installation</h1>
<p>You can install the polyfill via npm or by downloading a <a href="https://github.com/w3c/IntersectionObserver/archive/gh-pages.zip">zip</a> of this repository:</p>
<div class="fragment"><div class="line">npm install intersection-observer</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12141"></a>
Adding the polyfill to your site</h2>
<p>The examples below show various ways to add the <code>IntersectionObserver</code> polyfill to your site. Be sure to include the polyfill prior to referencing it anywhere in your JavaScript code.</p>
<p><b>Using <code>&lt;script&gt;</code> tags in the HTML:</b></p>
<div class="fragment"><div class="line">&lt;!-- Load the polyfill first. --&gt;</div>
<div class="line">&lt;script src=&quot;path/to/intersection-observer.js&quot;&gt;&lt;/script&gt;</div>
<div class="line"> </div>
<div class="line">&lt;!-- Load all other JavaScript. --&gt;</div>
<div class="line">&lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;</div>
</div><!-- fragment --><p><b>Using a module loader (e.g. Browserify or Webpack):</b></p>
<div class="fragment"><div class="line">// Require the polyfill before requiring any other modules.</div>
<div class="line">require(&#39;intersection-observer&#39;);</div>
<div class="line"> </div>
<div class="line">require(&#39;./foo.js&#39;);</div>
<div class="line">require(&#39;./bar.js&#39;);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12142"></a>
Configuring the polyfill</h1>
<p>It's impossible to handle all possible ways a target element could intersect with a root element without resorting to constantly polling the document for intersection changes.</p>
<p>To avoid this extra work and performance penalty, the default configuration of the polyfill optimizes for the most common <code>IntersectionObserver</code> use cases, which primarily include target elements intersecting with a root element due to:</p>
<ul>
<li>User scrolling.</li>
<li>Resizing the window.</li>
<li>Changes to the DOM.</li>
</ul>
<p>All of the above can be handled without polling the DOM.</p>
<p>There are, however, additional use cases that the default configuration will not detect. These include target elements intersecting with a root element due to:</p>
<ul>
<li>CSS changes on <code>:hover</code>, <code>:active</code>, or <code>:focus</code> states.</li>
<li>CSS changes due to transitions or animations with a long initial delay.</li>
<li>Resizable <code>&lt;textarea&gt;</code> elements that cause other elements to move around.</li>
<li>Scrolling of non-document elements in browsers that don't support the event capture phase.</li>
</ul>
<p>If you need to handle any of these use-cases, you can configure the polyfill to poll the document by setting the <code>POLL_INTERVAL</code> property. This can be set either globally or on a per-instance basis.</p>
<p><b>Enabling polling for all instance:</b></p>
<p>To enable polling for all instance, set a value for <code>POLL_INTERVAL</code> on the <code>IntersectionObserver</code> prototype:</p>
<div class="fragment"><div class="line">IntersectionObserver.prototype.POLL_INTERVAL = 100; // Time in milliseconds.</div>
</div><!-- fragment --><p><b>Enabling polling for individual instance:</b></p>
<p>To enable polling on only specific instances, set a <code>POLL_INTERVAL</code> value on the instance itself:</p>
<div class="fragment"><div class="line">var io = new IntersectionObserver(callback);</div>
<div class="line">io.POLL_INTERVAL = 100; // Time in milliseconds.</div>
<div class="line">io.observe(someTargetElement);</div>
</div><!-- fragment --><p><b>Note:</b> the <code>POLL_INTERVAL</code> property must be set prior to calling the <code>.observe</code> method, or the default configuration will be used.</p>
<p><b>Ignoring DOM changes</b></p>
<p>You can also choose to not check for intersections when the DOM changes by setting an observer's <code>USE_MUTATION_OBSERVER</code> property to <code>false</code> (either globally on the prototype or per-instance)</p>
<div class="fragment"><div class="line">IntersectionObserver.prototype.USE_MUTATION_OBSERVER = false; // Globally</div>
<div class="line"> </div>
<div class="line">// for an instance</div>
<div class="line">var io = new IntersectionObserver(callback);</div>
<div class="line">io.USE_MUTATION_OBSERVER = false;</div>
</div><!-- fragment --><p>This is recommended in cases where the DOM will update frequently but you know those updates will have no affect on the position or your target elements.</p>
<h1><a class="anchor" id="autotoc_md12143"></a>
Limitations</h1>
<p>This polyfill does not attempt to report intersections across same-origin <code>iframe</code> boundaries. While supporting same-origin iframes is technically possible, it would drastically reduce performance. Since most <code>iframe</code> usage on the web is cross-origin, this polyfill chooses to optimize for performantly handling the most common use cases. (Note: neither this polyfill nor native implementations support reporting intersections across cross-origin <code>iframe</code> boundaries.)</p>
<p>This polyfill also does not support the <a href="https://github.com/szager-chromium/IntersectionObserver/blob/v2/explainer.md">proposed v2 additions</a>, as these features are not currently possible to do with JavaScript and existing web APIs.</p>
<h1><a class="anchor" id="autotoc_md12144"></a>
Browser support</h1>
<p>The polyfill has been tested and known to work in the latest version of all browsers.</p>
<p>Legacy support is also possible in very old browsers by including a shim for ES5 as well as the <code>window.getComputedStyle</code> method. The easiest way to load the IntersectionObserver polyfill and have it work in the widest range of browsers is via <a href="https://cdn.polyfill.io/v2/docs/">polyfill.io</a>, which will automatically include dependencies where necessary:</p>
<div class="fragment"><div class="line">&lt;script src=&quot;https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver&quot;&gt;&lt;/script&gt;</div>
</div><!-- fragment --><p>With these polyfills, <code>IntersectionObserver</code> has been tested an known to work in the following browsers:</p>
<table class="doxtable">
<tr>
<td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/chrome/chrome_48x48.png" alt="Chrome" class="inline"/><br  />
 ✔  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/firefox/firefox_48x48.png" alt="Firefox" class="inline"/><br  />
 ✔  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/safari/safari_48x48.png" alt="Safari" class="inline"/><br  />
 6+  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/edge/edge_48x48.png" alt="Edge" class="inline"/><br  />
 ✔  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/archive/internet-explorer_7-8/internet-explorer_7-8_48x48.png" alt="Internet Explorer" class="inline"/><br  />
 7+  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/opera/opera_48x48.png" alt="Opera" class="inline"/><br  />
 ✔  </td><td align="center"><img src="https://raw.github.com/alrra/browser-logos/39.2.2/src/android/android_48x48.png" alt="Android" class="inline"/><br  />
 4.4+   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md12145"></a>
Running the tests</h1>
<p>To run the test suite for the <code>IntersectionObserver</code> polyfill, open the <a href="./intersection-observer-test.html"><code>intersection-observer-test.html</code></a> page in the browser of your choice.</p>
<p>If you run the tests in a browser that support <code>IntersectionObserver</code> natively, the tests will be run against the native implementation. If it doesn't the tests will be run against the polyfill. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
