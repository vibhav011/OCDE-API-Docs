<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OCDE: npm-registry-fetch &lt;a href=&quot;https://npm.im/npm-registry-fetch&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/v/npm-registry-fetch.svg&quot; alt=&quot;npm version&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://npm.im/npm-registry-fetch&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/l/npm-registry-fetch.svg&quot; alt=&quot;license&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://travis-ci.org/npm/npm-registry-fetch&quot;&gt;&lt;img src=&quot;https://img.shields.io/travis/npm/npm-registry-fetch/latest.svg&quot; alt=&quot;Travis&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://ci.appveyor.com/project/npm/npm-registry-fetch&quot;&gt;&lt;img src=&quot;https://img.shields.io/appveyor/ci/zkat/npm-registry-fetch/latest.svg&quot; alt=&quot;AppVeyor&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://coveralls.io/github/npm/npm-registry-fetch?branch=latest&quot;&gt;&lt;img src=&quot;https://coveralls.io/repos/github/npm/npm-registry-fetch/badge.svg?branch=latest&quot; alt=&quot;Coverage Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OCDE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_frontend_node_modules_npm-registry-fetch__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">npm-registry-fetch <a href="https://npm.im/npm-registry-fetch"><img src="https://img.shields.io/npm/v/npm-registry-fetch.svg" alt="npm version" style="pointer-events: none;" class="inline"/></a> <a href="https://npm.im/npm-registry-fetch"><img src="https://img.shields.io/npm/l/npm-registry-fetch.svg" alt="license" style="pointer-events: none;" class="inline"/></a> <a href="https://travis-ci.org/npm/npm-registry-fetch"><img src="https://img.shields.io/travis/npm/npm-registry-fetch/latest.svg" alt="Travis" style="pointer-events: none;" class="inline"/></a> <a href="https://ci.appveyor.com/project/npm/npm-registry-fetch"><img src="https://img.shields.io/appveyor/ci/zkat/npm-registry-fetch/latest.svg" alt="AppVeyor" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/npm/npm-registry-fetch?branch=latest"><img src="https://coveralls.io/repos/github/npm/npm-registry-fetch/badge.svg?branch=latest" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/npm/npm-registry-fetch"><code>npm-registry-fetch</code></a> is a Node.js library that implements a <code>fetch</code>-like API for accessing npm registry APIs consistently. It's able to consume npm-style configuration values and has all the necessary logic for picking registries, handling scopes, and dealing with authentication details built-in.</p>
<p>This package is meant to replace the older <a href="https://npm.im/npm-registry-client"><code>npm-registry-client</code></a>.</p>
<h1><a class="anchor" id="autotoc_md17859"></a>
Example</h1>
<div class="fragment"><div class="line">const npmFetch = require(&#39;npm-registry-fetch&#39;)</div>
<div class="line"> </div>
<div class="line">console.log(</div>
<div class="line">  await npmFetch.json(&#39;/-/ping&#39;)</div>
<div class="line">)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md17860"></a>
Table of Contents</h1>
<ul>
<li><a href="#install">Installing</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#fetch"><code>fetch</code></a></li>
<li><a href="#fetch-json"><code>fetch.json</code></a></li>
<li><a href="#fetch-opts"><code>fetch</code> options</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md17861"></a>
Install</h2>
<p><code>$ npm install npm-registry-fetch</code></p>
<h2><a class="anchor" id="autotoc_md17862"></a>
Contributing</h2>
<p>The npm team enthusiastically welcomes contributions and project participation! There's a bunch of things you can do if you want to contribute! The <a class="el" href="webdriver-js-extender_2_c_o_n_t_r_i_b_u_t_i_n_g_8md.html">Contributor</a>Guide" has all the information you need for everything from reporting bugs to contributing entire new features. Please don't hesitate to jump in if you'd like to, or even ask us questions if something isn't clear.</p>
<p>All participants and maintainers in this project are expected to follow <a class="el" href="websocket-driver_2_c_o_d_e___o_f___c_o_n_d_u_c_t_8md.html">Code of</a>Conduct", and just generally be excellent to each other.</p>
<p>Please refer to the <a class="el" href="md_frontend_node_modules_npm-registry-fetch__c_h_a_n_g_e_l_o_g.html">Changelog</a> for project history details, too.</p>
<p>Happy hacking!</p>
<h2><a class="anchor" id="autotoc_md17863"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md17864"></a>
Caching and &lt;tt&gt;write=true&lt;/tt&gt; query strings</h3>
<p>Before performing any PUT or DELETE operation, npm clients first make a GET request to the registry resource being updated, which includes the query string <code>?write=true</code>.</p>
<p>The semantics of this are, effectively, "I intend to write to this thing, and need to know the latest current value, so that my write can land cleanly".</p>
<p>The public npm registry handles these <code>?write=true</code> requests by ensuring that the cache is re-validated before sending a response. In order to maintain the same behavior on the client, and not get tripped up by an overeager local cache when we intend to write data to the registry, any request that comes through <code>npm-registry-fetch</code> that contains <code>write=true</code> in the query string will forcibly set the <code>prefer-online</code> option to <code>true</code>, and set both <code>prefer-offline</code> and <code>offline</code> to false, so that any local cached value will be revalidated.</p>
<h3><a class="anchor" id="autotoc_md17865"></a>
&lt;a name="fetch"&gt;&lt;/a&gt; &lt;tt&gt;&gt; fetch(url, [opts]) -&gt; Promise&lt;Response&gt;&lt;/tt&gt;</h3>
<p>Performs a request to a given URL.</p>
<p>The URL can be either a full URL, or a path to one. The appropriate registry will be automatically picked if only a URL path is given.</p>
<p>For available options, please see the section on <a href="#fetch-opts"><code>fetch</code> options</a>.</p>
<h4><a class="anchor" id="autotoc_md17866"></a>
Example</h4>
<div class="fragment"><div class="line">const res = await fetch(&#39;/-/ping&#39;)</div>
<div class="line">console.log(res.headers)</div>
<div class="line">res.on(&#39;data&#39;, d =&gt; console.log(d.toString(&#39;utf8&#39;)))</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17867"></a>
&lt;a name="fetch-json"&gt;&lt;/a&gt; &lt;tt&gt;&gt; fetch.json(url, [opts]) -&gt; Promise&lt;ResponseJSON&gt;&lt;/tt&gt;</h3>
<p>Performs a request to a given registry URL, parses the body of the response as JSON, and returns it as its final value. This is a utility shorthand for <code>fetch(url).then(res =&gt; res.json())</code>.</p>
<p>For available options, please see the section on <a href="#fetch-opts"><code>fetch</code> options</a>.</p>
<h4><a class="anchor" id="autotoc_md17868"></a>
Example</h4>
<div class="fragment"><div class="line">const res = await fetch.json(&#39;/-/ping&#39;)</div>
<div class="line">console.log(res) // Body parsed as JSON</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17869"></a>
&lt;a name="fetch-json-stream"&gt;&lt;/a&gt; &lt;tt&gt;&gt; fetch.json.stream(url, jsonPath, [opts]) -&gt; Stream&lt;/tt&gt;</h3>
<p>Performs a request to a given registry URL and parses the body of the response as JSON, with each entry being emitted through the stream.</p>
<p>The <code>jsonPath</code> argument is a <a href="https://github.com/dominictarr/JSONStream#jsonstreamparsepath"><code>JSONStream.parse()</code> path</a>, and the returned stream (unlike default <code>JSONStream</code>s), has a valid <code>Symbol.asyncIterator</code> implementation.</p>
<p>For available options, please see the section on <a href="#fetch-opts"><code>fetch</code> options</a>.</p>
<h4><a class="anchor" id="autotoc_md17870"></a>
Example</h4>
<div class="fragment"><div class="line">console.log(&#39;https://npm.im/~zkat has access to the following packages:&#39;)</div>
<div class="line">for await (let {key, value} of fetch.json.stream(&#39;/-/user/zkat/package&#39;, &#39;$*&#39;)) {</div>
<div class="line">  console.log(`https://npm.im/${key} (perms: ${value})`)</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17871"></a>
&lt;a name="fetch-opts"&gt;&lt;/a&gt; &lt;tt&gt;fetch&lt;/tt&gt; Options</h3>
<p>Fetch options are optional, and can be passed in as either a Map-like object (one with a <code>.get()</code> method), a plain javascript object, or a <a href="https://npm.im/figgy-pudding"><code>figgy-pudding</code></a> instance.</p>
<h4><a class="anchor" id="autotoc_md17872"></a>
&lt;a name="opts-agent"&gt;&lt;/a&gt; &lt;tt&gt;opts.agent&lt;/tt&gt;</h4>
<ul>
<li>Type: http.Agent</li>
<li>Default: an appropriate agent based on URL protocol and proxy settings</li>
</ul>
<p>An <a href="https://nodejs.org/api/http.html#http_class_http_agent"><code>Agent</code></a> instance to be shared across requests. This allows multiple concurrent <code>fetch</code> requests to happen on the same socket.</p>
<p>You do <em>not</em> need to provide this option unless you want something particularly specialized, since proxy configurations and http/https agents are already automatically managed internally when this option is not passed through.</p>
<h4><a class="anchor" id="autotoc_md17873"></a>
&lt;a name="opts-body"&gt;&lt;/a&gt; &lt;tt&gt;opts.body&lt;/tt&gt;</h4>
<ul>
<li>Type: Buffer | Stream | Object</li>
<li>Default: null</li>
</ul>
<p>Request body to send through the outgoing request. Buffers and Streams will be passed through as-is, with a default <code>content-type</code> of <code>application/octet-stream</code>. Plain JavaScript objects will be <code>JSON.stringify</code>ed and the <code>content-type</code> will default to <code>application/json</code>.</p>
<p>Use <a href="#opts-headers"><code>opts.headers</code></a> to set the content-type to something else.</p>
<h4><a class="anchor" id="autotoc_md17874"></a>
&lt;a name="opts-ca"&gt;&lt;/a&gt; &lt;tt&gt;opts.ca&lt;/tt&gt;</h4>
<ul>
<li>Type: String, Array, or null</li>
<li>Default: null</li>
</ul>
<p>The Certificate Authority signing certificate that is trusted for SSL connections to the registry. Values should be in PEM format (Windows calls it "Base-64 encoded X.509 (.CER)") with newlines replaced by the string &lsquo;&rsquo;<br  />
'`. For example:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  ca: &#39;-----BEGIN CERTIFICATE-----\nXXXX\nXXXX\n-----END CERTIFICATE-----&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Set to <code>null</code> to only allow "known" registrars, or to a specific CA cert to trust only that specific signing authority.</p>
<p>Multiple CAs can be trusted by specifying an array of certificates instead of a single string.</p>
<p>See also <a href="#opts-strict-ssl"><code>opts.strict-ssl</code></a>, <a href="#opts-ca"><code>opts.ca</code></a> and <a href="#opts-key"><code>opts.key</code></a></p>
<h4><a class="anchor" id="autotoc_md17875"></a>
&lt;a name="opts-cache"&gt;&lt;/a&gt; &lt;tt&gt;opts.cache&lt;/tt&gt;</h4>
<ul>
<li>Type: path</li>
<li>Default: null</li>
</ul>
<p>The location of the http cache directory. If provided, certain cachable requests will be cached according to <a href="https://tools.ietf.org/html/rfc7234">IETF RFC 7234</a> rules. This will speed up future requests, as well as make the cached data available offline if necessary/requested.</p>
<p>See also <a href="#opts-offline"><code>offline</code></a>, <a href="#opts-prefer-offline"><code>prefer-offline</code></a>, and <a href="#opts-prefer-online"><code>prefer-online</code></a>.</p>
<h4><a class="anchor" id="autotoc_md17876"></a>
&lt;a name="opts-cert"&gt;&lt;/a&gt; &lt;tt&gt;opts.cert&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>A client certificate to pass when accessing the registry. Values should be in PEM format (Windows calls it "Base-64 encoded X.509 (.CER)") with newlines replaced by the string &lsquo;&rsquo;<br  />
'`. For example:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  cert: &#39;-----BEGIN CERTIFICATE-----\nXXXX\nXXXX\n-----END CERTIFICATE-----&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><p>It is <em>not</em> the path to a certificate file (and there is no "certfile" option).</p>
<p>See also: <a href="#opts-ca"><code>opts.ca</code></a> and <a href="#opts-key"><code>opts.key</code></a></p>
<h4><a class="anchor" id="autotoc_md17877"></a>
&lt;a name="opts-fetch-retries"&gt;&lt;/a&gt; &lt;tt&gt;opts.fetch-retries&lt;/tt&gt;</h4>
<ul>
<li>Type: Number</li>
<li>Default: 2</li>
</ul>
<p>The "retries" config for <a href="https://npm.im/retry"><code>retry</code></a> to use when fetching packages from the registry.</p>
<p>See also <a href="#opts-retry"><code>opts.retry</code></a> to provide all retry options as a single object.</p>
<h4><a class="anchor" id="autotoc_md17878"></a>
&lt;a name="opts-fetch-retry-factor"&gt;&lt;/a&gt; &lt;tt&gt;opts.fetch-retry-factor&lt;/tt&gt;</h4>
<ul>
<li>Type: Number</li>
<li>Default: 10</li>
</ul>
<p>The "factor" config for <a href="https://npm.im/retry"><code>retry</code></a> to use when fetching packages.</p>
<p>See also <a href="#opts-retry"><code>opts.retry</code></a> to provide all retry options as a single object.</p>
<h4><a class="anchor" id="autotoc_md17879"></a>
&lt;a name="opts-fetch-retry-mintimeout"&gt;&lt;/a&gt; &lt;tt&gt;opts.fetch-retry-mintimeout&lt;/tt&gt;</h4>
<ul>
<li>Type: Number</li>
<li>Default: 10000 (10 seconds)</li>
</ul>
<p>The "minTimeout" config for <a href="https://npm.im/retry"><code>retry</code></a> to use when fetching packages.</p>
<p>See also <a href="#opts-retry"><code>opts.retry</code></a> to provide all retry options as a single object.</p>
<h4><a class="anchor" id="autotoc_md17880"></a>
&lt;a name="opts-fetch-retry-maxtimeout"&gt;&lt;/a&gt; &lt;tt&gt;opts.fetch-retry-maxtimeout&lt;/tt&gt;</h4>
<ul>
<li>Type: Number</li>
<li>Default: 60000 (1 minute)</li>
</ul>
<p>The "maxTimeout" config for <a href="https://npm.im/retry"><code>retry</code></a> to use when fetching packages.</p>
<p>See also <a href="#opts-retry"><code>opts.retry</code></a> to provide all retry options as a single object.</p>
<h4><a class="anchor" id="autotoc_md17881"></a>
&lt;a name="opts-force-auth"&gt;&lt;/a&gt; &lt;tt&gt;opts.force-auth&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.forceAuth</code></li>
<li>Type: Object</li>
<li>Default: null</li>
</ul>
<p>If present, other auth-related values in <code>opts</code> will be completely ignored, including <code>alwaysAuth</code>, <code>email</code>, and <code>otp</code>, when calculating auth for a request, and the auth details in <code>opts.forceAuth</code> will be used instead.</p>
<h4><a class="anchor" id="autotoc_md17882"></a>
&lt;a name="opts-gzip"&gt;&lt;/a&gt; &lt;tt&gt;opts.gzip&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: false</li>
</ul>
<p>If true, <code>npm-registry-fetch</code> will set the <code>Content-Encoding</code> header to <code>gzip</code> and use <code>zlib.gzip()</code> or <code>zlib.createGzip()</code> to gzip-encode <a href="#opts-body"><code>opts.body</code></a>.</p>
<h4><a class="anchor" id="autotoc_md17883"></a>
&lt;a name="opts-headers"&gt;&lt;/a&gt; &lt;tt&gt;opts.headers&lt;/tt&gt;</h4>
<ul>
<li>Type: Object</li>
<li>Default: null</li>
</ul>
<p>Additional headers for the outgoing request. This option can also be used to override headers automatically generated by <code>npm-registry-fetch</code>, such as <code>Content-Type</code>.</p>
<h4><a class="anchor" id="autotoc_md17884"></a>
&lt;a name="opts-ignore-body"&gt;&lt;/a&gt; &lt;tt&gt;opts.ignore-body&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.ignoreBody</code></li>
<li>Type: Boolean</li>
<li>Default: false</li>
</ul>
<p>If true, the <b>response body</b> will be thrown away and <code>res.body</code> set to <code>null</code>. This will prevent dangling response sockets for requests where you don't usually care what the response body is.</p>
<h4><a class="anchor" id="autotoc_md17885"></a>
&lt;a name="opts-integrity"&gt;&lt;/a&gt; &lt;tt&gt;opts.integrity&lt;/tt&gt;</h4>
<ul>
<li>Type: String | <a href="https://npm.im/ssri">SRI object</a></li>
<li>Default: null</li>
</ul>
<p>If provided, the response body's will be verified against this integrity string, using <a href="https://npm.im/ssri"><code>ssri</code></a>. If verification succeeds, the response will complete as normal. If verification fails, the response body will error with an <code>EINTEGRITY</code> error.</p>
<p>Body integrity is only verified if the body is actually consumed to completion &ndash; that is, if you use <code>res.json()</code>/<code>res.buffer()</code>, or if you consume the default <code>res</code> stream data to its end.</p>
<p>Cached data will have its integrity automatically verified using the previously-generated integrity hash for the saved request information, so <code>EINTEGRITY</code> errors can happen if <a href="#opts-cache"><code>opts.cache</code></a> is used, even if <code>opts.integrity</code> is not passed in.</p>
<h4><a class="anchor" id="autotoc_md17886"></a>
&lt;a name='opts-is-from-ci'&gt;&lt;/a&gt; &lt;tt&gt;opts.is-from-ci&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.isFromCI</code></li>
<li>Type: Boolean</li>
<li>Default: Based on environment variables</li>
</ul>
<p>This is used to populate the <code>npm-in-ci</code> request header sent to the registry.</p>
<h4><a class="anchor" id="autotoc_md17887"></a>
&lt;a name="opts-key"&gt;&lt;/a&gt; &lt;tt&gt;opts.key&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>A client key to pass when accessing the registry. Values should be in PEM format with newlines replaced by the string &lsquo;&rsquo;<br  />
'`. For example:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  key: &#39;-----BEGIN PRIVATE KEY-----\nXXXX\nXXXX\n-----END PRIVATE KEY-----&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><p>It is <em>not</em> the path to a key file (and there is no "keyfile" option).</p>
<p>See also: <a href="#opts-ca"><code>opts.ca</code></a> and <a href="#opts-cert"><code>opts.cert</code></a></p>
<h4><a class="anchor" id="autotoc_md17888"></a>
&lt;a name="opts-local-address"&gt;&lt;/a&gt; &lt;tt&gt;opts.local-address&lt;/tt&gt;</h4>
<ul>
<li>Type: IP Address String</li>
<li>Default: null</li>
</ul>
<p>The IP address of the local interface to use when making connections to the registry.</p>
<p>See also <a href="#opts-proxy"><code>opts.proxy</code></a></p>
<h4><a class="anchor" id="autotoc_md17889"></a>
&lt;a name="opts-log"&gt;&lt;/a&gt; &lt;tt&gt;opts.log&lt;/tt&gt;</h4>
<ul>
<li>Type: <a href="https://npm.im/npmlog"><code>npmlog</code></a>-like</li>
<li>Default: null</li>
</ul>
<p>Logger object to use for logging operation details. Must have the same methods as <code>npmlog</code>.</p>
<h4><a class="anchor" id="autotoc_md17890"></a>
&lt;a name="opts-map-json"&gt;&lt;/a&gt; &lt;tt&gt;opts.map-json&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>mapJson</code>, <code>mapJSON</code></li>
<li>Type: Function</li>
<li>Default: undefined</li>
</ul>
<p>When using <code>fetch.json.stream()</code> (NOT <code>fetch.json()</code>), this will be passed down to <a href="https://npm.im/JSONStream"><code>JSONStream</code></a> as the second argument to <code>JSONStream.parse</code>, and can be used to transform stream data before output.</p>
<h4><a class="anchor" id="autotoc_md17891"></a>
&lt;a name="opts-maxsockets"&gt;&lt;/a&gt; &lt;tt&gt;opts.maxsockets&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.max-sockets</code></li>
<li>Type: Integer</li>
<li>Default: 12</li>
</ul>
<p>Maximum number of sockets to keep open during requests. Has no effect if <a href="#opts-agent"><code>opts.agent</code></a> is used.</p>
<h4><a class="anchor" id="autotoc_md17892"></a>
&lt;a name="opts-method"&gt;&lt;/a&gt; &lt;tt&gt;opts.method&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: 'GET'</li>
</ul>
<p>HTTP method to use for the outgoing request. Case-insensitive.</p>
<h4><a class="anchor" id="autotoc_md17893"></a>
&lt;a name="opts-noproxy"&gt;&lt;/a&gt; &lt;tt&gt;opts.noproxy&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: process.env.NOPROXY</li>
</ul>
<p>If true, proxying will be disabled even if <a href="#opts-proxy"><code>opts.proxy</code></a> is used.</p>
<h4><a class="anchor" id="autotoc_md17894"></a>
&lt;a name="opts-npm-session"&gt;&lt;/a&gt; &lt;tt&gt;opts.npm-session&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.npmSession</code></li>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>If provided, will be sent in the <code>npm-session</code> header. This header is used by the npm registry to identify individual user sessions (usually individual invocations of the CLI).</p>
<h4><a class="anchor" id="autotoc_md17895"></a>
&lt;a name="opts-offline"&gt;&lt;/a&gt; &lt;tt&gt;opts.offline&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: false</li>
</ul>
<p>Force offline mode: no network requests will be done during install. To allow <code>npm-registry-fetch</code> to fill in missing cache data, see <a href="#opts-prefer-offline"><code>opts.prefer-offline</code></a>.</p>
<p>This option is only really useful if you're also using <a href="#opts-cache"><code>opts.cache</code></a>.</p>
<p>This option is set to <code>true</code> when the request includes <code>write=true</code> in the query string.</p>
<h4><a class="anchor" id="autotoc_md17896"></a>
&lt;a name="opts-otp"&gt;&lt;/a&gt; &lt;tt&gt;opts.otp&lt;/tt&gt;</h4>
<ul>
<li>Type: Number | String</li>
<li>Default: null</li>
</ul>
<p>This is a one-time password from a two-factor authenticator. It is required for certain registry interactions when two-factor auth is enabled for a user account.</p>
<h4><a class="anchor" id="autotoc_md17897"></a>
&lt;a name="opts-password"&gt;&lt;/a&gt; &lt;tt&gt;opts.password&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>_password</code></li>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>Password used for basic authentication. For the more modern authentication method, please use the (more secure) <a href="#opts-token"><code>opts.token</code></a></p>
<p>Can optionally be scoped to a registry by using a "nerf dart" for that registry. That is:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &#39;//registry.npmjs.org/:password&#39;: &#39;t0k3nH34r&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><p>See also <a href="#opts-username"><code>opts.username</code></a></p>
<h4><a class="anchor" id="autotoc_md17898"></a>
&lt;a name="opts-prefer-offline"&gt;&lt;/a&gt; &lt;tt&gt;opts.prefer-offline&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: false</li>
</ul>
<p>If true, staleness checks for cached data will be bypassed, but missing data will be requested from the server. To force full offline mode, use <a href="#opts-offline"><code>opts.offline</code></a>.</p>
<p>This option is generally only useful if you're also using <a href="#opts-cache"><code>opts.cache</code></a>.</p>
<p>This option is set to <code>false</code> when the request includes <code>write=true</code> in the query string.</p>
<h4><a class="anchor" id="autotoc_md17899"></a>
&lt;a name="opts-prefer-online"&gt;&lt;/a&gt; &lt;tt&gt;opts.prefer-online&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: false</li>
</ul>
<p>If true, staleness checks for cached data will be forced, making the CLI look for updates immediately even for fresh package data.</p>
<p>This option is generally only useful if you're also using <a href="#opts-cache"><code>opts.cache</code></a>.</p>
<p>This option is set to <code>true</code> when the request includes <code>write=true</code> in the query string.</p>
<h4><a class="anchor" id="autotoc_md17900"></a>
&lt;a name="opts-project-scope"&gt;&lt;/a&gt; &lt;tt&gt;opts.project-scope&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.projectScope</code></li>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>If provided, will be sent in the <code>npm-scope</code> header. This header is used by the npm registry to identify the toplevel package scope that a particular project installation is using.</p>
<h4><a class="anchor" id="autotoc_md17901"></a>
&lt;a name="opts-proxy"&gt;&lt;/a&gt; &lt;tt&gt;opts.proxy&lt;/tt&gt;</h4>
<ul>
<li>Type: url</li>
<li>Default: null</li>
</ul>
<p>A proxy to use for outgoing http requests. If not passed in, the <code>HTTP(S)_PROXY</code> environment variable will be used.</p>
<h4><a class="anchor" id="autotoc_md17902"></a>
&lt;a name="opts-query"&gt;&lt;/a&gt; &lt;tt&gt;opts.query&lt;/tt&gt;</h4>
<ul>
<li>Type: String | Object</li>
<li>Default: null</li>
</ul>
<p>If provided, the request URI will have a query string appended to it using this query. If <code>opts.query</code> is an object, it will be converted to a query string using <a href="https://nodejs.org/api/querystring.html#querystring_querystring_stringify_obj_sep_eq_options"><code>querystring.stringify()</code></a>.</p>
<p>If the request URI already has a query string, it will be merged with <code>opts.query</code>, preferring <code>opts.query</code> values.</p>
<h4><a class="anchor" id="autotoc_md17903"></a>
&lt;a name="opts-refer"&gt;&lt;/a&gt; &lt;tt&gt;opts.refer&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts.referer</code></li>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>Value to use for the <code>Referer</code> header. The npm CLI itself uses this to serialize the npm command line using the given request.</p>
<h4><a class="anchor" id="autotoc_md17904"></a>
&lt;a name="opts-registry"&gt;&lt;/a&gt; &lt;tt&gt;opts.registry&lt;/tt&gt;</h4>
<ul>
<li>Type: URL</li>
<li>Default: &lsquo;'<a href="https://registry.npmjs.org&rsquo;">https://registry.npmjs.org&amp;rsquo;</a>`</li>
</ul>
<p>Registry configuration for a request. If a request URL only includes the URL path, this registry setting will be prepended. This configuration is also used to determine authentication details, so even if the request URL references a completely different host, <code>opts.registry</code> will be used to find the auth details for that request.</p>
<p>See also <a href="#opts-scope"><code>opts.scope</code></a>, <a href="#opts-spec"><code>opts.spec</code></a>, and <a href="#opts-scope-registry"><code>opts.&lt;scope&gt;:registry</code></a> which can all affect the actual registry URL used by the outgoing request.</p>
<h4><a class="anchor" id="autotoc_md17905"></a>
&lt;a name="opts-retry"&gt;&lt;/a&gt; &lt;tt&gt;opts.retry&lt;/tt&gt;</h4>
<ul>
<li>Type: Object</li>
<li>Default: null</li>
</ul>
<p>Single-object configuration for request retry settings. If passed in, will override individually-passed <code>fetch-retry-*</code> settings.</p>
<h4><a class="anchor" id="autotoc_md17906"></a>
&lt;a name="opts-scope"&gt;&lt;/a&gt; &lt;tt&gt;opts.scope&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>Associate an operation with a scope for a scoped registry. This option can force lookup of scope-specific registries and authentication.</p>
<p>See also <a href="#opts-scope-registry"><code>opts.&lt;scope&gt;:registry</code></a> and <a href="#opts-spec"><code>opts.spec</code></a> for interactions with this option.</p>
<h4><a class="anchor" id="autotoc_md17907"></a>
&lt;a name="opts-scope-registry"&gt;&lt;/a&gt; &lt;tt&gt;opts.&lt;scope&gt;:registry&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>This option type can be used to configure the registry used for requests involving a particular scope. For example, &lsquo;opts[&rsquo;@myscope:registry'] = '<a href="https://scope-specific.registry/'">https://scope-specific.registry/'</a><code>will make it so requests go out to this registry instead of [</code>opts.registry&lt;tt&gt;](#opts-registry) when [opts.scope&lt;tt&gt;](#opts-scope) is used, or when [opts.spec`](#opts-spec) is a scoped package spec.</p>
<p>The <code>@</code> before the scope name is optional, but recommended.</p>
<h4><a class="anchor" id="autotoc_md17908"></a>
&lt;a name="opts-spec"&gt;&lt;/a&gt; &lt;tt&gt;opts.spec&lt;/tt&gt;</h4>
<ul>
<li>Type: String | <a href="https://npm.im/npm-registry-arg"><code>npm-registry-arg</code></a> object.</li>
<li>Default: null</li>
</ul>
<p>If provided, can be used to automatically configure <a href="#opts-scope"><code>opts.scope</code></a> based on a specific package name. Non-registry package specs will throw an error.</p>
<h4><a class="anchor" id="autotoc_md17909"></a>
&lt;a name="opts-strict-ssl"&gt;&lt;/a&gt; &lt;tt&gt;opts.strict-ssl&lt;/tt&gt;</h4>
<ul>
<li>Type: Boolean</li>
<li>Default: true</li>
</ul>
<p>Whether or not to do SSL key validation when making requests to the registry via https.</p>
<p>See also <a href="#opts-ca"><code>opts.ca</code></a>.</p>
<h4><a class="anchor" id="autotoc_md17910"></a>
&lt;a name="opts-timeout"&gt;&lt;/a&gt; &lt;tt&gt;opts.timeout&lt;/tt&gt;</h4>
<ul>
<li>Type: Milliseconds</li>
<li>Default: 0 (no timeout)</li>
</ul>
<p>Time before a hanging request times out.</p>
<h4><a class="anchor" id="autotoc_md17911"></a>
&lt;a name="opts-token"&gt;&lt;/a&gt; &lt;tt&gt;opts.token&lt;/tt&gt;</h4>
<ul>
<li>Alias: <code>opts._authToken</code></li>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>Authentication token string.</p>
<p>Can be scoped to a registry by using a "nerf dart" for that registry. That is:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &#39;//registry.npmjs.org/:token&#39;: &#39;t0k3nH34r&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md17912"></a>
&lt;a name="opts-user-agent"&gt;&lt;/a&gt; &lt;tt&gt;opts.user-agent&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: &lsquo;'npm-registry-fetch&lt;version&gt;/node&lt;node-version&gt;+&lt;arch&gt; (&lt;platform&gt;)&rsquo;`</li>
</ul>
<p>User agent string to send in the <code>User-Agent</code> header.</p>
<h4><a class="anchor" id="autotoc_md17913"></a>
&lt;a name="opts-username"&gt;&lt;/a&gt; &lt;tt&gt;opts.username&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>Username used for basic authentication. For the more modern authentication method, please use the (more secure) <a href="#opts-token"><code>opts.token</code></a></p>
<p>Can optionally be scoped to a registry by using a "nerf dart" for that registry. That is:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &#39;//registry.npmjs.org/:username&#39;: &#39;t0k3nH34r&#39;</div>
<div class="line">}</div>
</div><!-- fragment --><p>See also <a href="#opts-password"><code>opts.password</code></a></p>
<h4><a class="anchor" id="autotoc_md17914"></a>
&lt;a name="opts-auth"&gt;&lt;/a&gt; &lt;tt&gt;opts._auth&lt;/tt&gt;</h4>
<ul>
<li>Type: String</li>
<li>Default: null</li>
</ul>
<p>** DEPRECATED ** This is a legacy authentication token supported only for compatibility. Please use <a href="#opts-token"><code>opts.token</code></a> instead. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
